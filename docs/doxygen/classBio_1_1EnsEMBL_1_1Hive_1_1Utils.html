<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ensembl-hive: Bio::EnsEMBL::Hive::Utils Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ensembl-hive
   &#160;<span id="projectnumber">2.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Bio::EnsEMBL::Hive::Utils Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a38ef61e77ea6ba6bb1e08c35228cb7c3"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a38ef61e77ea6ba6bb1e08c35228cb7c3">stringify</a> ()</td></tr>
<tr class="separator:a38ef61e77ea6ba6bb1e08c35228cb7c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3350cd70c4187290ded88a59533e62d"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#ac3350cd70c4187290ded88a59533e62d">destringify</a> ()</td></tr>
<tr class="separator:ac3350cd70c4187290ded88a59533e62d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c682e65730f8bb07e2d6274958b640d"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a8c682e65730f8bb07e2d6274958b640d">dir_revhash</a> ()</td></tr>
<tr class="separator:a8c682e65730f8bb07e2d6274958b640d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad08ca8e7270cfe9c94e0865e3cf75862"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#ad08ca8e7270cfe9c94e0865e3cf75862">parse_cmdline_options</a> ()</td></tr>
<tr class="separator:ad08ca8e7270cfe9c94e0865e3cf75862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a487b583d13e668734c35bcff7e427d9b"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a487b583d13e668734c35bcff7e427d9b">find_submodules</a> ()</td></tr>
<tr class="separator:a487b583d13e668734c35bcff7e427d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1956b39203f4df86e8d7aac981462ee5"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a1956b39203f4df86e8d7aac981462ee5">load_file_or_module</a> ()</td></tr>
<tr class="separator:a1956b39203f4df86e8d7aac981462ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8abe58a987444c45b366ef5dba4e218"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#ad8abe58a987444c45b366ef5dba4e218">script_usage</a> ()</td></tr>
<tr class="separator:ad8abe58a987444c45b366ef5dba4e218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a436607946c20c76c08db79c35a3f7d93"><td class="memItemLeft" align="right" valign="top">public List&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a436607946c20c76c08db79c35a3f7d93">split_for_bash</a> ()</td></tr>
<tr class="separator:a436607946c20c76c08db79c35a3f7d93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1cbcb45d800cf3c5b47079e0b27e237"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#aa1cbcb45d800cf3c5b47079e0b27e237">go_figure_dbc</a> ()</td></tr>
<tr class="separator:aa1cbcb45d800cf3c5b47079e0b27e237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af71b51b03c60163952912de68e5eabf6"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#af71b51b03c60163952912de68e5eabf6">throw</a> ()</td></tr>
<tr class="separator:af71b51b03c60163952912de68e5eabf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90d8d2a331fb15be0a5fc6dfdedceb66"><td class="memItemLeft" align="right" valign="top">public Tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a90d8d2a331fb15be0a5fc6dfdedceb66">join_command_args</a> ()</td></tr>
<tr class="separator:a90d8d2a331fb15be0a5fc6dfdedceb66"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="Synopsis"></a>
Synopsis</h1>
<div class="fragment"><div class="line"><span class="preprocessor">    # Example of an import:</span></div><div class="line">use <a class="code" href="namespaceBio_1_1EnsEMBL_1_1Hive_1_1Utils.html">Bio::EnsEMBL::Hive::Utils</a> <span class="stringliteral">&#39;stringify&#39;</span>;</div><div class="line">my $input_id_string = <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a38ef61e77ea6ba6bb1e08c35228cb7c3">stringify</a>($input_id_hash);</div><div class="line"></div><div class="line"><span class="preprocessor">    # Example of inheritance:</span></div><div class="line">use base (<span class="stringliteral">&#39;Bio::EnsEMBL::Hive::Utils&#39;</span>, ...);</div><div class="line">my $input_id_string = $self-&gt;stringify($input_id_hash);</div><div class="line"></div><div class="line"><span class="preprocessor">    # Example of a direct call:</span></div><div class="line">use Bio::EnsEMBL::Hive::Utils;</div><div class="line">my $input_id_string = <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a38ef61e77ea6ba6bb1e08c35228cb7c3">Bio::EnsEMBL::Hive::Utils::stringify</a>($input_id_hash);</div></div><!-- fragment --> <h1><a class="anchor" id="Description"></a>
Description</h1>
<p> <pre>
    This module provides general utility functions that can be used in different contexts through three different calling mechanisms:

          import:  another module/script can selectively import methods from this module into its namespace

          inheritance:  another module can inherit from this one and so implicitly acquire the methods into its namespace
        
          direct call to a module's method:  another module/script can directly call a method from this module prefixed with this module's name

</pre> </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac3350cd70c4187290ded88a59533e62d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3350cd70c4187290ded88a59533e62d">&#9670;&nbsp;</a></span>destringify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::destringify </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: This function takes in a string that may or may not contain a stingified Perl structure.
                 If it seems to contain a hash/array/quoted_string, the contents is evaluated, otherwise it is returned "as is".
                 This function is mainly used to read values from 'meta' table that may represent Perl structures, but generally don't have to.</pre><pre>    Callers    : <a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1DBSQL_1_1PipelineWideParametersAdaptor.html">Bio::EnsEMBL::Hive::DBSQL::PipelineWideParametersAdaptor</a>   # destringification of general 'meta' params
                 <a class="el" href="beekeeper_8pl.html">beekeeper.pl</a> script                                        # destringification of the 'pipeline_name' meta param</pre><pre> </pre><div id="codesection-destringify" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-destringify-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-destringify-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-destringify-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#ac3350cd70c4187290ded88a59533e62d">destringify</a> {</div><div class="line">    my $value = pop @_;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(defined $value) {</div><div class="line">        <span class="keywordflow">if</span>($value=~/^<span class="stringliteral">&#39;.*&#39;</span>$/s</div><div class="line">        or $value=~/^<span class="stringliteral">&quot;.*&quot;</span>$/s</div><div class="line">        or $value=~/^{.*}$/s</div><div class="line">        or $value=~/^\[.*\]$/s</div><div class="line">        or looks_like_number($value)    <span class="preprocessor"># Needed for pipeline_wide_parameters as each value is destringified independently and the JSON writer would otherwise force writing numbers as strings</span></div><div class="line">        or $value eq <span class="stringliteral">&#39;undef&#39;</span>) {</div><div class="line"></div><div class="line">            $value = eval($value);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> $value;</div><div class="line">}</div></div><!-- fragment --> </div> 
</div>
</div>
<a id="a8c682e65730f8bb07e2d6274958b640d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c682e65730f8bb07e2d6274958b640d">&#9670;&nbsp;</a></span>dir_revhash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::dir_revhash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: This function takes in a string (which is usually a numeric id) and turns its reverse into a multilevel directory hash.
                 Please note that no directory is created at this step - it is purely a string conversion function.</pre><pre>    Callers    : <a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Worker.html">Bio::EnsEMBL::Hive::Worker</a>                 # hashing of the worker output directories
                 <a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1RunnableDB_1_1JobFactory.html">Bio::EnsEMBL::Hive::RunnableDB::JobFactory</a> # hashing of an arbitrary id</pre><pre> </pre><div id="codesection-dir_revhash" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-dir_revhash-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-dir_revhash-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-dir_revhash-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a8c682e65730f8bb07e2d6274958b640d">dir_revhash</a> {</div><div class="line">    my $id = pop @_;</div><div class="line"></div><div class="line">    my @dirs = reverse(split(<span class="comment">//, $id));</span></div><div class="line">    pop @dirs;  # <span class="keywordflow">do</span> not use the first digit <span class="keywordflow">for</span> hashing</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> join(<span class="charliteral">&#39;/&#39;</span>, @dirs);</div><div class="line">}</div></div><!-- fragment --> </div> 
</div>
</div>
<a id="a487b583d13e668734c35bcff7e427d9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a487b583d13e668734c35bcff7e427d9b">&#9670;&nbsp;</a></span>find_submodules()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::find_submodules </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: This function takes one argument ("prefix" of a module name),
                transforms it into a directory name from the filesystem's point of view
                and finds all module names in these "directories".
                Each module_name found is reported only once,
                even if there are multiple matching files in different directories.</pre><pre>    Callers    : scripts</pre><pre> </pre><div id="codesection-find_submodules" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-find_submodules-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-find_submodules-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-find_submodules-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a487b583d13e668734c35bcff7e427d9b">find_submodules</a> {</div><div class="line">    my $prefix = shift @_;</div><div class="line"></div><div class="line">    $prefix=~s{::}{/}g;</div><div class="line"></div><div class="line">    my %seen_module_name = ();</div><div class="line"></div><div class="line">    <span class="keywordflow">foreach</span> my $inc (@INC) {</div><div class="line">        <span class="keywordflow">foreach</span> my $full_module_path (&lt;$inc/$prefix<span class="comment">/*.pm&gt;) {</span></div><div class="line"><span class="comment">            my $module_name = substr($full_module_path, length($inc)+1, -3);    # remove leading &quot;$inc/&quot; and trailing &#39;.pm&#39;</span></div><div class="line"><span class="comment">            $module_name=~s{/}{::}g;                                            # transform back to module_name space</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">            $seen_module_name{$module_name}++;</span></div><div class="line"><span class="comment">        }</span></div><div class="line"><span class="comment">    }</span></div><div class="line"><span class="comment">    return [ keys %seen_module_name ];</span></div><div class="line"><span class="comment">}</span></div></div><!-- fragment --> </div> 
</div>
</div>
<a id="aa1cbcb45d800cf3c5b47079e0b27e237"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1cbcb45d800cf3c5b47079e0b27e237">&#9670;&nbsp;</a></span>go_figure_dbc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::go_figure_dbc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-go_figure_dbc" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-go_figure_dbc-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-go_figure_dbc-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-go_figure_dbc-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#aa1cbcb45d800cf3c5b47079e0b27e237">go_figure_dbc</a> {</div><div class="line">    my ($foo, $reg_type) = @_;      # NB: the second parameter is used by a Compara Runnable</div><div class="line"></div><div class="line">    require <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1DBSQL_1_1DBConnection.html">Bio::EnsEMBL::Hive::DBSQL::DBConnection</a>;</div><div class="line"></div><div class="line"><span class="preprocessor">#    if(UNIVERSAL::isa($foo, &#39;Bio::EnsEMBL::DBSQL::DBConnection&#39;)) { # already a DBConnection, return it:</span></div><div class="line">    <span class="keywordflow">if</span> ( ref($foo) =~ /DBConnection$/ ) {   # already a DBConnection, hive-ify it and <span class="keywordflow">return</span></div><div class="line">      <span class="keywordflow">return</span> bless $foo, <span class="stringliteral">&#39;Bio::EnsEMBL::Hive::DBSQL::DBConnection&#39;</span>;</div><div class="line">      </div><div class="line"><span class="preprocessor">#    } elsif(UNIVERSAL::can($foo, &#39;dbc&#39;) and UNIVERSAL::isa($foo-&gt;dbc, &#39;Bio::EnsEMBL::DBSQL::DBConnection&#39;)) {</span></div><div class="line">    } elsif(UNIVERSAL::can($foo, <span class="stringliteral">&#39;dbc&#39;</span>) and ref($foo-&gt;dbc) =~ /DBConnection$/) {</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> bless $foo-&gt;dbc, <span class="stringliteral">&#39;Bio::EnsEMBL::Hive::DBSQL::DBConnection&#39;</span>;</div><div class="line"></div><div class="line"><span class="preprocessor">#    } elsif(UNIVERSAL::can($foo, &#39;db&#39;) and UNIVERSAL::can($foo-&gt;db, &#39;dbc&#39;) and UNIVERSAL::isa($foo-&gt;db-&gt;dbc, &#39;Bio::EnsEMBL::DBSQL::DBConnection&#39;)) { # another data adaptor or Runnable:</span></div><div class="line">    } elsif(UNIVERSAL::can($foo, <span class="stringliteral">&#39;db&#39;</span>) and UNIVERSAL::can($foo-&gt;db, <span class="stringliteral">&#39;dbc&#39;</span>) and ref($foo-&gt;db-&gt;dbc) =~ /DBConnection$/) { # another data adaptor or Runnable:</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> bless $foo-&gt;db-&gt;dbc, <span class="stringliteral">&#39;Bio::EnsEMBL::Hive::DBSQL::DBConnection&#39;</span>;</div><div class="line"></div><div class="line">    } elsif(ref($foo) eq <span class="stringliteral">&#39;HASH&#39;</span>) {</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> Bio::EnsEMBL::Hive::DBSQL::DBConnection-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1DBSQL_1_1DBConnection.html#a7931542229862db93f899aef0eb983f0">new</a>( %$foo );</div><div class="line"></div><div class="line">    } elsif($foo =~ m{^(\w*):<span class="comment">//(?:(\w+)(?:\:([^/\@]*))?\@)?(?:([\w\-\.]+)(?:\:(\d+))?)?/(\w*)} ) {  # We can probably use a simpler regexp</span></div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> Bio::EnsEMBL::Hive::DBSQL::DBConnection-&gt;<span class="keyword">new</span>( -url =&gt; $foo );</div><div class="line"></div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        unless(ref($foo)) {    # maybe it is simply a registry key?</div><div class="line">            my $dba;</div><div class="line"></div><div class="line">            eval {</div><div class="line">                require Bio::EnsEMBL::Registry;</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span>($foo=~/^(\w+):(\w+)$/) {</div><div class="line">                    ($reg_type, $foo) = ($1, $2);</div><div class="line">                }</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span>($reg_type) {</div><div class="line">                    $dba = Bio::EnsEMBL::Registry-&gt;get_DBAdaptor($foo, $reg_type);</div><div class="line">                } <span class="keywordflow">else</span> {</div><div class="line">                    my $dbas = Bio::EnsEMBL::Registry-&gt;get_all_DBAdaptors(-species =&gt; $foo);</div><div class="line"></div><div class="line">                    <span class="keywordflow">if</span>( scalar(@$dbas) == 1 ) {</div><div class="line">                        $dba = $dbas-&gt;[0];</div><div class="line">                    } elsif( @$dbas ) {</div><div class="line">                        die <span class="stringliteral">&quot;The registry contains multiple entries for &#39;$foo&#39;, please prepend the reg_alias with the desired type&quot;</span>;</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            };</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span>(UNIVERSAL::can($dba, <span class="stringliteral">&#39;dbc&#39;</span>)) {</div><div class="line">                <span class="keywordflow">return</span> bless $dba-&gt;dbc, <span class="stringliteral">&#39;Bio::EnsEMBL::Hive::DBSQL::DBConnection&#39;</span>;</div><div class="line">            }</div><div class="line">        }</div><div class="line">        die <span class="stringliteral">&quot;Sorry, could not figure out how to make a DBConnection object out of &#39;$foo&#39;&quot;</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line">sub report_versions {</div></div><!-- fragment --> </div> 
</div>
</div>
<a id="a90d8d2a331fb15be0a5fc6dfdedceb66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90d8d2a331fb15be0a5fc6dfdedceb66">&#9670;&nbsp;</a></span>join_command_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Tuple Bio::EnsEMBL::Hive::Utils::join_command_args </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Argument[0]: String or Arrayref of Strings
    Description: Prepares the command to be executed by system(). It is needed if the
                 command is in fact composed of multiple commands.
    Returns:     Tuple (boolean,string). The boolean indicates whether it was needed to
                 join the arguments. The string is the new command-line string.
                 PS: Shamelessly adapted from <a href="http://www.perlmonks.org/?node_id=908096">http://www.perlmonks.org/?node_id=908096</a></pre><pre> </pre><div id="codesection-join_command_args" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-join_command_args-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-join_command_args-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-join_command_args-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a90d8d2a331fb15be0a5fc6dfdedceb66">join_command_args</a> {</div><div class="line">    my $args = shift;</div><div class="line">    <span class="keywordflow">return</span> (0,$args) unless ref($args);</div><div class="line"></div><div class="line"><span class="preprocessor">    # system() can only spawn 1 process. For multiple commands piped</span></div><div class="line"><span class="preprocessor">    # together or if redirections are used, it needs a shell to parse</span></div><div class="line"><span class="preprocessor">    # a string representing the whole command</span></div><div class="line">    my $join_needed = (grep {$shell_characters{$_}} @$args) ? 1 : 0;</div><div class="line"></div><div class="line">    my @new_args = ();</div><div class="line">    <span class="keywordflow">foreach</span> my $a (@$args) {</div><div class="line">        <span class="keywordflow">if</span> ($shell_characters{$a} or $a =~ /^[a-zA-Z0-9_\/\-]+\z/) {</div><div class="line">            push @new_args, $a;</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line"><span class="preprocessor">            # Escapes the single-quotes and protects the arguments</span></div><div class="line">            $a =~ s/<span class="charliteral">&#39;/&#39;</span>\\<span class="stringliteral">&#39;&#39;</span>/g;</div><div class="line">            push @new_args, <span class="stringliteral">&quot;&#39;$a&#39;&quot;</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> ($join_needed,join(<span class="charliteral">&#39; &#39;</span>, @new_args));</div><div class="line">}</div></div><!-- fragment --> </div> 
</div>
</div>
<a id="a1956b39203f4df86e8d7aac981462ee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1956b39203f4df86e8d7aac981462ee5">&#9670;&nbsp;</a></span>load_file_or_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::load_file_or_module </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: This function takes one argument, tries to determine whether it is a module name ('::'-separated)
                or a path to the module ('/'-separated), finds the module_name and dynamically loads it.</pre><pre>    Callers    : scripts</pre><pre> </pre><div id="codesection-load_file_or_module" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-load_file_or_module-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-load_file_or_module-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-load_file_or_module-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a1956b39203f4df86e8d7aac981462ee5">load_file_or_module</a> {</div><div class="line">    my $file_or_module = pop @_;</div><div class="line"></div><div class="line">    my $module_name;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>( $file_or_module=~/^(\w|::)+$/ ) {</div><div class="line"></div><div class="line">        $module_name = $file_or_module;</div><div class="line"></div><div class="line">    } elsif(-r $file_or_module) {</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span>(my $package_line = `grep ^package $file_or_module`) {</div><div class="line">            <span class="keywordflow">if</span>($package_line=~/^\s*package\s+((?:\w|::)+)\s*;/) {</div><div class="line"></div><div class="line">                $module_name = $1;</div><div class="line"></div><div class="line">            } <span class="keywordflow">else</span> {</div><div class="line">                warn <span class="stringliteral">&quot;Package line format unrecognized:\n$package_line\n&quot;</span>;</div><div class="line">                <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#ad8abe58a987444c45b366ef5dba4e218">script_usage</a>(1);</div><div class="line">            }</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line">            warn <span class="stringliteral">&quot;Could not find the package definition line in &#39;$file_or_module&#39;\n&quot;</span>;</div><div class="line">            <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#ad8abe58a987444c45b366ef5dba4e218">script_usage</a>(1);</div><div class="line">        }</div><div class="line"></div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        warn <span class="stringliteral">&quot;The parameter &#39;$file_or_module&#39; neither seems to be a valid module nor a valid readable file\n&quot;</span>;</div><div class="line">        <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#ad8abe58a987444c45b366ef5dba4e218">script_usage</a>(1);</div><div class="line">    }</div><div class="line"></div><div class="line">    eval <span class="stringliteral">&quot;require $module_name;&quot;</span>;</div><div class="line">    die $@ <span class="keywordflow">if</span> ($@);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> $module_name;</div><div class="line">}</div></div><!-- fragment --> </div> 
</div>
</div>
<a id="ad08ca8e7270cfe9c94e0865e3cf75862"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad08ca8e7270cfe9c94e0865e3cf75862">&#9670;&nbsp;</a></span>parse_cmdline_options()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::parse_cmdline_options </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: This function reads all options from command line into a key-value hash
                (keys must be prefixed with a single or double dash, the following term becomes the value).
                The rest of the terms go into the list.
                Command line options are not removed from , so the same or another parser can be run again if needed.</pre><pre>    Callers    : scripts</pre><pre> </pre><div id="codesection-parse_cmdline_options" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-parse_cmdline_options-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-parse_cmdline_options-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-parse_cmdline_options-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#ad08ca8e7270cfe9c94e0865e3cf75862">parse_cmdline_options</a> {</div><div class="line">    my %pairs = ();</div><div class="line">    my @list  = ();</div><div class="line"></div><div class="line">    my $temp_key;</div><div class="line"></div><div class="line">    <span class="keywordflow">foreach</span> my $arg (@ARGV) {</div><div class="line">        <span class="keywordflow">if</span>($temp_key) {                     # only the value, <span class="keyword">get</span> the key from buffer</div><div class="line">            $pairs{$temp_key} = <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#ac3350cd70c4187290ded88a59533e62d">destringify</a>($arg);</div><div class="line">            $temp_key = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line">        } elsif($arg=~/^--?(\w+)=(.+)$/) {  # both the key and the value</div><div class="line">            $pairs{$1} = <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#ac3350cd70c4187290ded88a59533e62d">destringify</a>($2);</div><div class="line">        } elsif($arg=~/^--?(\w+)$/) {       # only the key, buffer it and expect the value on the next round</div><div class="line">            $temp_key = $1;</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line">            push @list, $arg;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> (\%pairs, \@list);</div><div class="line">}</div></div><!-- fragment --> </div> 
</div>
</div>
<a id="ad8abe58a987444c45b366ef5dba4e218"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8abe58a987444c45b366ef5dba4e218">&#9670;&nbsp;</a></span>script_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::script_usage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: This function takes one argument (return value).
                It attempts to run perldoc on the current script, and if perldoc is not present, emulates its behaviour.
                Then it exits with the return value given.</pre><pre>    Callers    : scripts</pre><pre> </pre><div id="codesection-script_usage" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-script_usage-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-script_usage-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-script_usage-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#ad8abe58a987444c45b366ef5dba4e218">script_usage</a> {</div><div class="line">    my $retvalue = pop @_;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(`which perldoc`) {</div><div class="line">        system(<span class="stringliteral">&#39;perldoc&#39;</span>, $0);</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="keywordflow">foreach</span> my $line (&lt;main::DATA&gt;) {</div><div class="line">            <span class="keywordflow">if</span>($line!~s/\=\w+\s?<span class="comment">//) {</span></div><div class="line">                $line = <span class="stringliteral">&quot;\t$line&quot;</span>;</div><div class="line">            }</div><div class="line">            print $line;</div><div class="line">        }</div><div class="line">        &lt;main::DATA&gt;;   # <span class="keyword">this</span> is just to stop the <span class="stringliteral">&#39;used once&#39;</span> warnings</div><div class="line">    }</div><div class="line">    exit($retvalue);</div><div class="line">}</div></div><!-- fragment --> </div> 
</div>
</div>
<a id="a436607946c20c76c08db79c35a3f7d93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a436607946c20c76c08db79c35a3f7d93">&#9670;&nbsp;</a></span>split_for_bash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public List Bio::EnsEMBL::Hive::Utils::split_for_bash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: This function takes one argument (String) and splits it assuming it represents bash command line parameters.
                 It mainly splits on whitespace, except for cases when spaces are trapped between quotes or apostrophes.
                 In the latter case the outer quotes are removed.
    Returntype : list of Strings</pre><pre> </pre><div id="codesection-split_for_bash" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-split_for_bash-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-split_for_bash-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-split_for_bash-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a436607946c20c76c08db79c35a3f7d93">split_for_bash</a> {</div><div class="line">    my $cmd = pop @_;</div><div class="line"></div><div class="line">    my @cmd = ($cmd =~ /((?:<span class="stringliteral">&quot;.*?&quot;</span>|<span class="stringliteral">&#39;.*?&#39;</span>|\S)+)/g);   # split on space except <span class="keywordflow">for</span> quoted strings</div><div class="line"></div><div class="line">    <span class="keywordflow">foreach</span> my $syll (@cmd) {                       # <span class="keyword">remove</span> the outer quotes or apostrophes</div><div class="line">        <span class="keywordflow">if</span>($syll=~/^(\S*?)<span class="stringliteral">&quot;(.*?)&quot;</span>(\S*?)$/) {</div><div class="line">            $syll = $1 . $2 . $3;</div><div class="line">        } elsif($syll=~/^(\S*?)<span class="stringliteral">&#39;(.*?)&#39;</span>(\S*?)$/) {</div><div class="line">            $syll = $1 . $2 . $3;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> @cmd;</div><div class="line">}</div></div><!-- fragment --> </div> 
</div>
</div>
<a id="a38ef61e77ea6ba6bb1e08c35228cb7c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38ef61e77ea6ba6bb1e08c35228cb7c3">&#9670;&nbsp;</a></span>stringify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::stringify </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: This function takes in a Perl data structure and stringifies it using specific configuration
                 that allows us to store/recreate this data structure according to our specific storage/communication requirements.</pre><pre>    Callers    : <a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1DBSQL_1_1AnalysisJobAdaptor.html">Bio::EnsEMBL::Hive::DBSQL::AnalysisJobAdaptor</a>      # stringification of input_id() hash
                 <a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1PipeConfig_1_1HiveGeneric__conf.html">Bio::EnsEMBL::Hive::PipeConfig::HiveGeneric_conf</a>   # stringification of parameters() hash</pre><pre> </pre><div id="codesection-stringify" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-stringify-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-stringify-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-stringify-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html#a38ef61e77ea6ba6bb1e08c35228cb7c3">stringify</a> {</div><div class="line">    my $structure = pop @_;</div><div class="line"></div><div class="line">    local $Data::Dumper::Indent    = 0;         # we want everything on one line</div><div class="line">    local $Data::Dumper::Terse     = 1;         # and we want it without dummy variable names</div><div class="line">    local $Data::Dumper::Sortkeys  = 1;         # make stringification more deterministic</div><div class="line">    local $Data::Dumper::Quotekeys = 1;         # conserve some space</div><div class="line">    local $Data::Dumper::Useqq     = 1;         # escape the \n and \t correctly</div><div class="line">    local $Data::Dumper::Pair      = <span class="stringliteral">&#39; =&gt; &#39;</span>;    # make sure we always produce Perl-parsable structures, no matter what is <span class="keyword">set</span> externally</div><div class="line">    local $Data::Dumper::Maxdepth  = 0;         # make sure nobody can mess up stringification by setting a lower Maxdepth</div><div class="line">    local $Data::Dumper::Deepcopy  = 1;         # avoid <span class="keyword">self</span>-references in <span class="keywordflow">case</span> the same structure is reused within params</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> Dumper($structure);</div><div class="line">}</div></div><!-- fragment --> </div> 
</div>
</div>
<a id="af71b51b03c60163952912de68e5eabf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af71b51b03c60163952912de68e5eabf6">&#9670;&nbsp;</a></span>throw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::throw </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-throw" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-throw-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-throw-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-throw-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <span class="keywordflow">throw</span> {</div><div class="line">    my $msg = pop @_;</div><div class="line"></div><div class="line"><span class="preprocessor">        # TODO: newer versions of Carp are much more tunable, but I am stuck with v1.08 .</span></div><div class="line"><span class="preprocessor">        #       Alternatively, we could implement our own stack reporter instead of Carp::confess.</span></div><div class="line">    confess $msg;</div><div class="line">}</div></div><!-- fragment --> </div> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>modules/Bio/EnsEMBL/Hive/<a class="el" href="Utils_8pm.html">Utils.pm</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceBio.html">Bio</a></li><li class="navelem"><a class="el" href="namespaceBio_1_1EnsEMBL.html">EnsEMBL</a></li><li class="navelem"><a class="el" href="namespaceBio_1_1EnsEMBL_1_1Hive.html">Hive</a></li><li class="navelem"><a class="el" href="classBio_1_1EnsEMBL_1_1Hive_1_1Utils.html">Utils</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
