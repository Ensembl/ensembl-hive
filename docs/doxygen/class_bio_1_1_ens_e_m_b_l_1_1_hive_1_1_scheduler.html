<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ensembl-hive: Bio::EnsEMBL::Hive::Scheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ensembl-hive
   &#160;<span id="projectnumber">1.9</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Bio::EnsEMBL::Hive::Scheduler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a65f7b429d0ffbda238faeda2451350a8"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler.html#a65f7b429d0ffbda238faeda2451350a8">schedule_workers_resync_if_necessary</a> ()</td></tr>
<tr class="separator:a65f7b429d0ffbda238faeda2451350a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab56e0d78a8774c93dc262a5c63812891"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler.html#ab56e0d78a8774c93dc262a5c63812891">suggest_analysis_to_specialize_by_rc_id_meadow_type</a> ()</td></tr>
<tr class="separator:ab56e0d78a8774c93dc262a5c63812891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad37b01e88608cec39e5f883d95c8ea42"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler.html#ad37b01e88608cec39e5f883d95c8ea42">schedule_workers</a> ()</td></tr>
<tr class="separator:ad37b01e88608cec39e5f883d95c8ea42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="Description"></a>
Description</h1>
 <pre>
    Scheduler starts with the numbers of required workers for unblocked analyses,
    then goes through several kinds of restrictions (submit_limit, meadow_limits, hive_capacity, etc)
    that act as limiters and may cap the original numbers in several ways.
    The capped numbers are then grouped by meadow_type and rc_name and returned in a two-level hash.

</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad37b01e88608cec39e5f883d95c8ea42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Scheduler::schedule_workers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-schedule_workers" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-schedule_workers-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-schedule_workers-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-schedule_workers-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler.html#ad37b01e88608cec39e5f883d95c8ea42">schedule_workers</a> {</div>
<div class="line">    my ($queen, $submit_capacity, $default_meadow_type, $filter_rc_id, $filter_meadow_type, $filter_analysis, $meadow_capacity_limiter_hashed_by_type, $analysis_id2rc_name) = @_;</div>
<div class="line"></div>
<div class="line">    my @suitable_analyses   = $filter_analysis</div>
<div class="line">                                ? ( $filter_analysis-&gt;stats )</div>
<div class="line">                                : @{ $queen-&gt;db-&gt;get_AnalysisStatsAdaptor-&gt;fetch_all_by_suitability_rc_id_meadow_type($filter_rc_id, $filter_meadow_type) };</div>
<div class="line"></div>
<div class="line">    unless(@suitable_analyses) {</div>
<div class="line">        <span class="keywordflow">return</span> $analysis_id2rc_name ? ({}, 0, <span class="stringliteral">&quot;Scheduler could not find any suitable analyses to start with\n&quot;</span>) : undef;    # FIXME: returns data in different format in <span class="stringliteral">&quot;suggest analysis&quot;</span> mode</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # the pre-pending-adjusted outcome will be stored here:</span></div>
<div class="line"><span class="preprocessor"></span>    my %workers_to_submit_by_meadow_type_rc_name    = ();</div>
<div class="line">    my $total_workers_required                      = 0;</div>
<div class="line">    my $log_buffer                                  = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"></div>
<div class="line">    my $submit_capacity_limiter                     = <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_limiter.html">Bio::EnsEMBL::Hive::Limiter</a>-&gt;<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_limiter.html#a89203ff40a85e13c7ef840a46dcf4487">new</a>( <span class="stringliteral">&#39;Max number of Workers scheduled this time&#39;</span>, $submit_capacity );</div>
<div class="line">    my $queen_capacity_limiter                      = <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_limiter.html">Bio::EnsEMBL::Hive::Limiter</a>-&gt;<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_limiter.html#a89203ff40a85e13c7ef840a46dcf4487">new</a>( <span class="stringliteral">&#39;Total reciprocal capacity of the Hive&#39;</span>, 1.0 - $queen-&gt;get_hive_current_load() );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $analysis_stats (@suitable_analyses) {</div>
<div class="line">        last <span class="keywordflow">if</span>( $submit_capacity_limiter-&gt;reached );</div>
<div class="line"></div>
<div class="line">        my $analysis            = $analysis_stats-&gt;get_analysis;    # FIXME: <span class="keywordflow">if</span> it proves too expensive we may need to consider caching</div>
<div class="line">        my $this_meadow_type    = $analysis-&gt;meadow_type || $default_meadow_type;</div>
<div class="line"></div>
<div class="line">        next <span class="keywordflow">if</span>( $meadow_capacity_limiter_hashed_by_type &amp;&amp; $meadow_capacity_limiter_hashed_by_type-&gt;{$this_meadow_type}-&gt;reached );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #digging deeper under the surface so need to sync:</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span>( $analysis_stats-&gt;status =~ /^(LOADING|ALL_CLAIMED|BLOCKED|SYNCHING)$/ ) {</div>
<div class="line">            $queen-&gt;safe_synchronize_AnalysisStats($analysis_stats);</div>
<div class="line">        }</div>
<div class="line">        next <span class="keywordflow">if</span>( $analysis_stats-&gt;status =~ /^(BLOCKED|SYNCHING)$/ );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # getting the initial worker requirement for this analysis (may be stale if not sync&#39;ed recently)</span></div>
<div class="line"><span class="preprocessor"></span>        my $extra_workers_this_analysis = $analysis_stats-&gt;num_required_workers;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # if this analysis doesn&#39;t require any extra workers - just skip it:</span></div>
<div class="line"><span class="preprocessor"></span>        next <span class="keywordflow">if</span> ($extra_workers_this_analysis &lt;= 0);</div>
<div class="line"></div>
<div class="line">        $total_workers_required += $extra_workers_this_analysis;    # also keep the total number required so far (<span class="keywordflow">if</span> nothing required we may need a resync later)</div>
<div class="line"></div>
<div class="line">            <span class="preprocessor"># setting up all negotiating limiters:</span></div>
<div class="line"><span class="preprocessor"></span>        $queen_capacity_limiter-&gt;multiplier( $analysis_stats-&gt;hive_capacity );</div>
<div class="line">        my @limiters = (</div>
<div class="line">            $submit_capacity_limiter,</div>
<div class="line">            $queen_capacity_limiter,</div>
<div class="line">            $meadow_capacity_limiter_hashed_by_type</div>
<div class="line">                ? $meadow_capacity_limiter_hashed_by_type-&gt;{$this_meadow_type}</div>
<div class="line">                : (),</div>
<div class="line">            defined($analysis-&gt;analysis_capacity)</div>
<div class="line">                ? <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_limiter.html">Bio::EnsEMBL::Hive::Limiter</a>-&gt;<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_limiter.html#a89203ff40a85e13c7ef840a46dcf4487">new</a>( <span class="stringliteral">&quot;Number of Workers working at &#39;&quot;</span>.$analysis-&gt;logic_name.<span class="stringliteral">&quot;&#39; analysis&quot;</span>,</div>
<div class="line">                                                    $analysis-&gt;analysis_capacity - $analysis_stats-&gt;num_running_workers )</div>
<div class="line">                : (),</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # negotiations:</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">foreach</span> my $limiter (@limiters) {</div>
<div class="line">            $extra_workers_this_analysis = $limiter-&gt;preliminary_offer( $extra_workers_this_analysis );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # do not continue with this analysis if limiters haven&#39;t agreed on a positive number:</span></div>
<div class="line"><span class="preprocessor"></span>        next <span class="keywordflow">if</span> ($extra_workers_this_analysis &lt;= 0);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # let all parties know the final decision of negotiations:</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">foreach</span> my $limiter (@limiters) {</div>
<div class="line">            $limiter-&gt;final_decision( $extra_workers_this_analysis );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>($analysis_id2rc_name) {</div>
<div class="line">            my $this_rc_name    = $analysis_id2rc_name-&gt;{ $analysis_stats-&gt;analysis_id };</div>
<div class="line">            $workers_to_submit_by_meadow_type_rc_name{ $this_meadow_type }{ $this_rc_name } += $extra_workers_this_analysis;</div>
<div class="line">            $log_buffer .= $analysis_stats-&gt;toString . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">            $log_buffer .= sprintf(<span class="stringliteral">&quot;Before checking the Valley for pending jobs, Scheduler allocated $extra_workers_this_analysis x $this_meadow_type:$this_rc_name extra workers for &#39;%s&#39; [%.4f hive_load remaining]\n&quot;</span>,</div>
<div class="line">                $analysis-&gt;logic_name,</div>
<div class="line">                $queen_capacity_limiter-&gt;available_capacity,</div>
<div class="line">            );</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">return</span> $analysis_stats;     # FIXME: returns data in different format in <span class="stringliteral">&quot;suggest analysis&quot;</span> mode</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> (\%workers_to_submit_by_meadow_type_rc_name, $total_workers_required, $log_buffer);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a65f7b429d0ffbda238faeda2451350a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Scheduler::schedule_workers_resync_if_necessary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-schedule_workers_resync_if_necessary" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-schedule_workers_resync_if_necessary-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-schedule_workers_resync_if_necessary-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-schedule_workers_resync_if_necessary-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler.html#a65f7b429d0ffbda238faeda2451350a8">schedule_workers_resync_if_necessary</a> {</div>
<div class="line">    my ($queen, $valley, $filter_analysis) = @_;</div>
<div class="line"></div>
<div class="line">    my $submit_capacity                         = $valley-&gt;config_get(<span class="stringliteral">&#39;SubmitWorkersMax&#39;</span>);</div>
<div class="line">    my $default_meadow_type                     = $valley-&gt;get_default_meadow()-&gt;type;</div>
<div class="line">    my $meadow_capacity_limiter_hashed_by_type  = $valley-&gt;get_meadow_capacity_hash_by_meadow_type();</div>
<div class="line"></div>
<div class="line">    my $analysis_id2rc_id                       = $queen-&gt;db-&gt;get_AnalysisAdaptor-&gt;fetch_HASHED_FROM_analysis_id_TO_resource_class_id();</div>
<div class="line">    my $rc_id2name                              = $queen-&gt;db-&gt;get_ResourceClassAdaptor-&gt;fetch_HASHED_FROM_resource_class_id_TO_name();</div>
<div class="line"><span class="preprocessor">        # combined mapping:</span></div>
<div class="line"><span class="preprocessor"></span>    my $analysis_id2rc_name                     = { map { $_ =&gt; $rc_id2name-&gt;{ $analysis_id2rc_id-&gt;{ $_ }} } keys %$analysis_id2rc_id };</div>
<div class="line"></div>
<div class="line">    my ($workers_to_submit_by_meadow_type_rc_name, $total_workers_required, $log_buffer)</div>
<div class="line">        = <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler.html#ad37b01e88608cec39e5f883d95c8ea42">schedule_workers</a>($queen, $submit_capacity, $default_meadow_type, undef, undef, $filter_analysis, $meadow_capacity_limiter_hashed_by_type, $analysis_id2rc_name);</div>
<div class="line">    print $log_buffer;</div>
<div class="line"></div>
<div class="line">    unless( $total_workers_required ) {</div>
<div class="line">        print <span class="stringliteral">&quot;\nScheduler: according to analysis_stats no workers are required... let&#39;s see if resync can fix it.\n&quot;</span> ;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # FIXME: here is an (optimistic) assumption all Workers the Queen can see are reachable from the Valley:</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span>( $queen-&gt;count_running_workers() != $valley-&gt;count_running_workers ) {</div>
<div class="line">            print <span class="stringliteral">&quot;Scheduler: mismatch between Queen&#39;s workers and Valley&#39;s workers detected, checking for dead workers...\n&quot;</span>;</div>
<div class="line">            $queen-&gt;check_for_dead_workers($valley, 1);</div>
<div class="line">        }</div>
<div class="line">        print <span class="stringliteral">&quot;Scheduler: re-balancing of semaphore_counts...\n&quot;</span>;</div>
<div class="line">        $queen-&gt;db-&gt;get_AnalysisJobAdaptor-&gt;balance_semaphores($filter_analysis &amp;&amp; $filter_analysis-&gt;dbID);</div>
<div class="line">        print <span class="stringliteral">&quot;Scheduler: re-synchronizing the Hive...\n&quot;</span>;</div>
<div class="line">        $queen-&gt;synchronize_hive($filter_analysis);</div>
<div class="line"></div>
<div class="line">        ($workers_to_submit_by_meadow_type_rc_name, $total_workers_required, $log_buffer)</div>
<div class="line">            = <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler.html#ad37b01e88608cec39e5f883d95c8ea42">schedule_workers</a>($queen, $submit_capacity, $default_meadow_type, undef, undef, $filter_analysis, $meadow_capacity_limiter_hashed_by_type, $analysis_id2rc_name);</div>
<div class="line">        print $log_buffer;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # adjustment for pending workers:</span></div>
<div class="line"><span class="preprocessor"></span>    my ($pending_worker_counts_by_meadow_type_rc_name, $total_pending_all_meadows)  = $valley-&gt;get_pending_worker_counts_by_meadow_type_rc_name();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span>( my ($this_meadow_type, $partial_workers_to_submit_by_rc_name) = each %$workers_to_submit_by_meadow_type_rc_name) {</div>
<div class="line">        <span class="keywordflow">while</span>( my ($this_rc_name, $workers_to_submit_this_group) = each %$partial_workers_to_submit_by_rc_name) {</div>
<div class="line">            <span class="keywordflow">if</span>(my $pending_this_group = $pending_worker_counts_by_meadow_type_rc_name-&gt;{ $this_meadow_type }{ $this_rc_name }) {</div>
<div class="line"></div>
<div class="line">                print <span class="stringliteral">&quot;Scheduler was thinking of submitting $workers_to_submit_this_group x $this_meadow_type:$this_rc_name workers when it detected $pending_this_group pending in this group, &quot;</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>( $workers_to_submit_this_group &gt; $pending_this_group) {</div>
<div class="line">                    $workers_to_submit_by_meadow_type_rc_name-&gt;{$this_meadow_type}{$this_rc_name}   -= $pending_this_group; # adjust the hashed value</div>
<div class="line">                    print <span class="stringliteral">&quot;so is going to submit only &quot;</span>.$workers_to_submit_by_meadow_type_rc_name-&gt;{$this_meadow_type}{$this_rc_name}.<span class="stringliteral">&quot; extra\n&quot;</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    <span class="keyword">delete</span> $workers_to_submit_by_meadow_type_rc_name-&gt;{$this_meadow_type}{$this_rc_name};                   # avoid leaving an empty group in the hash</div>
<div class="line">                    print <span class="stringliteral">&quot;so is not going to submit any extra\n&quot;</span>;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                print <span class="stringliteral">&quot;Scheduler is going to submit $workers_to_submit_this_group x $this_meadow_type:$this_rc_name workers\n&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        unless(keys %{ $workers_to_submit_by_meadow_type_rc_name-&gt;{$this_meadow_type} }) {  # <span class="keywordflow">if</span> nothing has been scheduled <span class="keywordflow">for</span> a meadow,</div>
<div class="line">            <span class="keyword">delete</span> $workers_to_submit_by_meadow_type_rc_name-&gt;{$this_meadow_type};          # <span class="keywordflow">do</span> not mention the meadow in the hash</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $workers_to_submit_by_meadow_type_rc_name;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ab56e0d78a8774c93dc262a5c63812891"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Scheduler::suggest_analysis_to_specialize_by_rc_id_meadow_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-suggest_analysis_to_specialize_by_rc_id_meadow_type" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-suggest_analysis_to_specialize_by_rc_id_meadow_type-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-suggest_analysis_to_specialize_by_rc_id_meadow_type-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-suggest_analysis_to_specialize_by_rc_id_meadow_type-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler.html#ab56e0d78a8774c93dc262a5c63812891">suggest_analysis_to_specialize_by_rc_id_meadow_type</a> {</div>
<div class="line">    my ($queen, $filter_rc_id, $filter_meadow_type) = @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler.html#ad37b01e88608cec39e5f883d95c8ea42">schedule_workers</a>($queen, 1, $filter_meadow_type, $filter_rc_id, $filter_meadow_type);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>modules/Bio/EnsEMBL/Hive/<a class="el" href="_scheduler_8pm.html">Scheduler.pm</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_bio.html">Bio</a></li><li class="navelem"><a class="el" href="namespace_bio_1_1_ens_e_m_b_l.html">EnsEMBL</a></li><li class="navelem"><a class="el" href="namespace_bio_1_1_ens_e_m_b_l_1_1_hive.html">Hive</a></li><li class="navelem"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_scheduler.html">Scheduler</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
