<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ensembl-hive: Bio::EnsEMBL::Hive::HivePipeline Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ensembl-hive
   &#160;<span id="projectnumber">2.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Bio::EnsEMBL::Hive::HivePipeline Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a062182d1ab903af52151fad31f43c720"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a062182d1ab903af52151fad31f43c720">hive_dba</a> ()</td></tr>
<tr class="separator:a062182d1ab903af52151fad31f43c720"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab72a467083ef8615659b889b5df406e3"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ab72a467083ef8615659b889b5df406e3">display_name</a> ()</td></tr>
<tr class="separator:ab72a467083ef8615659b889b5df406e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeefe79cc2cf756544a7221f267d4ba42"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#aeefe79cc2cf756544a7221f267d4ba42">collection_of</a> ()</td></tr>
<tr class="separator:aeefe79cc2cf756544a7221f267d4ba42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fd8b2b6f44baf418c443fd60f7c98ca"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a0fd8b2b6f44baf418c443fd60f7c98ca">find_by_query</a> ()</td></tr>
<tr class="separator:a0fd8b2b6f44baf418c443fd60f7c98ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d9f11c3864d9c8acd2571557c702be7"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a1d9f11c3864d9c8acd2571557c702be7">new</a> ()</td></tr>
<tr class="separator:a1d9f11c3864d9c8acd2571557c702be7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada3f8744b8a7a35d4539987c04505830"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ada3f8744b8a7a35d4539987c04505830">invalidate_collections</a> ()</td></tr>
<tr class="separator:ada3f8744b8a7a35d4539987c04505830"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74dca8d32aacd114a85074f020cfdd54"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a74dca8d32aacd114a85074f020cfdd54">save_collections</a> ()</td></tr>
<tr class="separator:a74dca8d32aacd114a85074f020cfdd54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4462838d0383710b2b0e5088808b0bfb"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a4462838d0383710b2b0e5088808b0bfb">add_new_or_update</a> ()</td></tr>
<tr class="separator:a4462838d0383710b2b0e5088808b0bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9654827ef85b2e148a2d5dbe73fc5a9"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#af9654827ef85b2e148a2d5dbe73fc5a9">get_source_analyses</a> ()</td></tr>
<tr class="separator:af9654827ef85b2e148a2d5dbe73fc5a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad97c253b2d2fc16aa87c7578072e2a90"><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ad97c253b2d2fc16aa87c7578072e2a90">_meta_value_by_key</a> ()</td></tr>
<tr class="separator:ad97c253b2d2fc16aa87c7578072e2a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad46849b18dba756c5807c5c2f7975ed9"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ad46849b18dba756c5807c5c2f7975ed9">hive_use_param_stack</a> ()</td></tr>
<tr class="separator:ad46849b18dba756c5807c5c2f7975ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab79e3b15691f8124c902858843eb4642"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ab79e3b15691f8124c902858843eb4642">hive_pipeline_name</a> ()</td></tr>
<tr class="separator:ab79e3b15691f8124c902858843eb4642"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f93d8dd0743b0e6df80e333040a65c"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a86f93d8dd0743b0e6df80e333040a65c">hive_auto_rebalance_semaphores</a> ()</td></tr>
<tr class="separator:a86f93d8dd0743b0e6df80e333040a65c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2359ac73d27df69b00e10ee0b1477c3"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#aa2359ac73d27df69b00e10ee0b1477c3">hive_use_triggers</a> ()</td></tr>
<tr class="separator:aa2359ac73d27df69b00e10ee0b1477c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdd4bc73a3c624c23ea5f8a764713abb"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#acdd4bc73a3c624c23ea5f8a764713abb">list_all_hive_tables</a> ()</td></tr>
<tr class="separator:acdd4bc73a3c624c23ea5f8a764713abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd4c18923e66f4f01df0395026bfa62"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a6bd4c18923e66f4f01df0395026bfa62">list_all_hive_views</a> ()</td></tr>
<tr class="separator:a6bd4c18923e66f4f01df0395026bfa62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab27f77421e1aa02add3b98a317ac86c5"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ab27f77421e1aa02add3b98a317ac86c5">hive_sql_schema_version</a> ()</td></tr>
<tr class="separator:ab27f77421e1aa02add3b98a317ac86c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28bc98bca99a65646b7ec46c28ca5f08"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a28bc98bca99a65646b7ec46c28ca5f08">params_as_hash</a> ()</td></tr>
<tr class="separator:a28bc98bca99a65646b7ec46c28ca5f08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70e2871060467212cdbefed17aa80ebf"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a70e2871060467212cdbefed17aa80ebf">print_diagram</a> ()</td></tr>
<tr class="separator:a70e2871060467212cdbefed17aa80ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b54dcd86a9a0531275764ff61d489d8"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a2b54dcd86a9a0531275764ff61d489d8">apply_tweaks</a> ()</td></tr>
<tr class="separator:a2b54dcd86a9a0531275764ff61d489d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad97c253b2d2fc16aa87c7578072e2a90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::Hive::HivePipeline::_meta_value_by_key </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: getter/setter for a particular meta_value from '<a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_meta_parameters.html">MetaParameters</a>' collection given meta_key</pre><pre> </pre><div id="codesection-_meta_value_by_key" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-_meta_value_by_key-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_meta_value_by_key-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_meta_value_by_key-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ad97c253b2d2fc16aa87c7578072e2a90">_meta_value_by_key</a> {</div>
<div class="line">    my $self    = shift @_;</div>
<div class="line">    my $meta_key= shift @_;</div>
<div class="line"></div>
<div class="line">    my $hash = $self-&gt;collection_of( <span class="stringliteral">&#39;MetaParameters&#39;</span> )-&gt;find_one_by( <span class="stringliteral">&#39;meta_key&#39;</span>, $meta_key );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(@_) {</div>
<div class="line">        my $new_value = shift @_;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>($hash) {</div>
<div class="line">            $hash-&gt;{<span class="stringliteral">&#39;meta_value&#39;</span>} = $new_value;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            ($hash) = $self-&gt;add_new_or_update( <span class="stringliteral">&#39;MetaParameters&#39;</span>,</div>
<div class="line">                <span class="stringliteral">&#39;meta_key&#39;</span>      =&gt; $meta_key,</div>
<div class="line">                <span class="stringliteral">&#39;meta_value&#39;</span>    =&gt; $new_value,</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $hash &amp;&amp; $hash-&gt;{<span class="stringliteral">&#39;meta_value&#39;</span>};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a4462838d0383710b2b0e5088808b0bfb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::add_new_or_update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-add_new_or_update" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-add_new_or_update-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-add_new_or_update-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-add_new_or_update-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a4462838d0383710b2b0e5088808b0bfb">add_new_or_update</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line">    my $type = shift @_;</div>
<div class="line"></div>
<div class="line">    my $class   = <span class="stringliteral">&#39;Bio::EnsEMBL::Hive::&#39;</span>.$type;</div>
<div class="line">    my $coll    = $self-&gt;collection_of( $type );</div>
<div class="line"></div>
<div class="line">    my $object;</div>
<div class="line">    my $newly_made = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( my $unikey_keys = $class-&gt;unikey() ) {</div>
<div class="line">        my %other_pairs = @_;</div>
<div class="line">        my %unikey_pairs;</div>
<div class="line">        @unikey_pairs{ @$unikey_keys} = <span class="keyword">delete</span> @other_pairs{ @$unikey_keys };</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( $object = $coll-&gt;find_one_by( %unikey_pairs ) ) {</div>
<div class="line">            my $found_display = UNIVERSAL::can($object, <span class="stringliteral">&#39;toString&#39;</span>) ? $object-&gt;toString : stringify($object);</div>
<div class="line">            <span class="keywordflow">if</span>(keys %other_pairs) {</div>
<div class="line">                warn <span class="stringliteral">&quot;Updating $found_display with (&quot;</span>.stringify(\%other_pairs).<span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line">                <span class="keywordflow">if</span>( ref($object) eq <span class="stringliteral">&#39;HASH&#39;</span> ) {</div>
<div class="line">                    @$object{ keys %other_pairs } = values %other_pairs;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    <span class="keywordflow">while</span>( my ($key, $value) = each %other_pairs ) {</div>
<div class="line">                        $object-&gt;$key($value);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                warn <span class="stringliteral">&quot;Found a matching $found_display\n&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        } elsif( my $dark_coll = $coll-&gt;dark_collection) {</div>
<div class="line">            <span class="keywordflow">if</span>( my $shadow_object = $dark_coll-&gt;find_one_by( %unikey_pairs ) ) {</div>
<div class="line">                $dark_coll-&gt;forget( $shadow_object );</div>
<div class="line"><span class="preprocessor">#                warn &quot;Found a shadow on the dark side, forgetting it\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>            }</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        warn <span class="stringliteral">&quot;$class doesn&#39;t redefine unikey(), so unique objects cannot be identified&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    unless( $object ) {</div>
<div class="line">        $object = $class-&gt;can(<span class="stringliteral">&#39;new&#39;</span>) ? $class-&gt;new( @_ ) : { @_ };</div>
<div class="line">        $newly_made = 1;</div>
<div class="line"></div>
<div class="line">        $coll-&gt;add( $object );</div>
<div class="line"></div>
<div class="line">        $object-&gt;hive_pipeline($self) <span class="keywordflow">if</span> UNIVERSAL::can($object, <span class="stringliteral">&#39;hive_pipeline&#39;</span>);</div>
<div class="line"></div>
<div class="line">        my $found_display = UNIVERSAL::can($object, <span class="stringliteral">&#39;toString&#39;</span>) ? $object-&gt;toString : <span class="stringliteral">&#39;naked entry &#39;</span>.stringify($object);</div>
<div class="line">        warn <span class="stringliteral">&quot;Created a new $found_display\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> ($object, $newly_made);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a2b54dcd86a9a0531275764ff61d489d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::apply_tweaks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: changes attributes of Analyses|ResourceClasses|ResourceDescriptions or values of pipeline/analysis parameters</pre><pre> </pre><div id="codesection-apply_tweaks" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-apply_tweaks-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-apply_tweaks-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-apply_tweaks-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a2b54dcd86a9a0531275764ff61d489d8">apply_tweaks</a> {</div>
<div class="line">    my $self    = shift @_;</div>
<div class="line">    my $tweaks  = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $tweak (@$tweaks) {</div>
<div class="line">        print <span class="stringliteral">&quot;\nTweak.Request\t$tweak\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>($tweak=~/^pipeline\.param\[(\w+)\](\?|#|=(.+))$/) {</div>
<div class="line">            my ($param_name, $operator, $new_value_str) = ($1, $2, $3);</div>
<div class="line"></div>
<div class="line">            my $pwp_collection  = $self-&gt;collection_of( <span class="stringliteral">&#39;PipelineWideParameters&#39;</span> );</div>
<div class="line">            my $hash_pair       = $pwp_collection-&gt;find_one_by(<span class="stringliteral">&#39;param_name&#39;</span>, $param_name);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;?&#39;</span>) {</div>
<div class="line">                print <span class="stringliteral">&quot;Tweak.Show    \tpipeline.param[$param_name] ::\t&quot;</span></div>
<div class="line">                     . ($hash_pair ? $hash_pair-&gt;{<span class="stringliteral">&#39;param_value&#39;</span>} : <span class="stringliteral">&#39;(missing_value)&#39;</span>) . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">            } elsif($operator eq <span class="charliteral">&#39;#&#39;</span>) {</div>
<div class="line">                $pwp_collection-&gt;forget_and_mark_for_deletion( $hash_pair );</div>
<div class="line"></div>
<div class="line">                print <span class="stringliteral">&quot;Tweak.Deleting\tpipeline.param[$param_name] ::\t&quot;</span>.stringify($hash_pair-&gt;{<span class="stringliteral">&#39;param_value&#39;</span>}).<span class="stringliteral">&quot; --&gt; (missing value)\n&quot;</span>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                my $new_value = destringify( $new_value_str );</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>($hash_pair) {</div>
<div class="line">                    print <span class="stringliteral">&quot;Tweak.Changing\tpipeline.param[$param_name] ::\t$hash_pair-&gt;{&#39;param_value&#39;} --&gt; $new_value_str\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">                    $hash_pair-&gt;{<span class="stringliteral">&#39;param_value&#39;</span>} = stringify($new_value);</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    print <span class="stringliteral">&quot;Tweak.Adding  \tpipeline.param[$param_name] ::\t(missing value) --&gt; $new_value_str\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">                    $self-&gt;add_new_or_update( <span class="stringliteral">&#39;PipelineWideParameters&#39;</span>,</div>
<div class="line">                        <span class="stringliteral">&#39;param_name&#39;</span>    =&gt; $param_name,</div>
<div class="line">                        <span class="stringliteral">&#39;param_value&#39;</span>   =&gt; stringify($new_value),</div>
<div class="line">                    );</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">        } elsif($tweak=~/^pipeline\.(\w+)(\?|=(.+))$/) {</div>
<div class="line">            my ($attrib_name, $operator, $new_value_str) = ($1, $2, $3);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>($self-&gt;can($attrib_name)) {</div>
<div class="line">                my $old_value = stringify( $self-&gt;$attrib_name() );</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;?&#39;</span>) {</div>
<div class="line">                    print <span class="stringliteral">&quot;Tweak.Show    \tpipeline.$attrib_name ::\t$old_value\n&quot;</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    print <span class="stringliteral">&quot;Tweak.Changing\tpipeline.$attrib_name ::\t$old_value --&gt; $new_value_str\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">                    $self-&gt;$attrib_name( $new_value_str );</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                print <span class="stringliteral">&quot;Tweak.Error   \tCould not find the pipeline-wide &#39;$attrib_name&#39; method\n&quot;</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">        } elsif($tweak=~/^analysis\[([^\]]+)\]\.param\[(\w+)\](\?|#|=(.+))$/) {</div>
<div class="line">            my ($analyses_pattern, $param_name, $operator, $new_value_str) = ($1, $2, $3, $4);</div>
<div class="line"></div>
<div class="line">            my $analyses = $self-&gt;collection_of( <span class="stringliteral">&#39;Analysis&#39;</span> )-&gt;find_all_by_pattern( $analyses_pattern );</div>
<div class="line">            print <span class="stringliteral">&quot;Tweak.Found   \t&quot;</span>.scalar(@$analyses).<span class="stringliteral">&quot; analyses matching the pattern &#39;$analyses_pattern&#39;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">            my $new_value = destringify( $new_value_str );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">foreach</span> my $analysis (@$analyses) {</div>
<div class="line">                my $analysis_name = $analysis-&gt;logic_name;</div>
<div class="line"></div>
<div class="line">                my $old_value = $analysis-&gt;parameters;</div>
<div class="line"></div>
<div class="line">                my $param_hash  = destringify( $old_value );</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;?&#39;</span>) {</div>
<div class="line">                    print <span class="stringliteral">&quot;Tweak.Show    \tanalysis[$analysis_name].param[$param_name] ::\t&quot;</span></div>
<div class="line">                        . (exists($param_hash-&gt;{ $param_name }) ? stringify($param_hash-&gt;{ $param_name }) : <span class="stringliteral">&#39;(missing value)&#39;</span>)</div>
<div class="line">                        .<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">                } elsif($operator eq <span class="charliteral">&#39;#&#39;</span>) {</div>
<div class="line">                    print <span class="stringliteral">&quot;Tweak.Deleting\tanalysis[$analysis_name].param[$param_name] ::\t&quot;</span>.stringify($param_hash-&gt;{ $param_name }).<span class="stringliteral">&quot; --&gt; (missing value)\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">                    <span class="keyword">delete</span> $param_hash-&gt;{ $param_name };</div>
<div class="line">                    $analysis-&gt;parameters( stringify($param_hash) );</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    <span class="keywordflow">if</span>(exists($param_hash-&gt;{ $param_name })) {</div>
<div class="line">                        print <span class="stringliteral">&quot;Tweak.Changing\tanalysis[$analysis_name].param[$param_name] ::\t&quot;</span>.stringify($param_hash-&gt;{ $param_name }).<span class="stringliteral">&quot; --&gt; $new_value_str\n&quot;</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        print <span class="stringliteral">&quot;Tweak.Adding  \tanalysis[$analysis_name].param[$param_name] ::\t(missing value) --&gt; $new_value_str\n&quot;</span>;</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    $param_hash-&gt;{ $param_name } = $new_value;</div>
<div class="line">                    $analysis-&gt;parameters( stringify($param_hash) );</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">        } elsif($tweak=~/^analysis\[([^\]]+)\]\.(wait_for|flow_into)(\?|#|\+?=(.+))$/) {</div>
<div class="line">            my ($analyses_pattern, $attrib_name, $operation, $new_value_str) = ($1, $2, $3, $4);</div>
<div class="line">            $operation=~/^(\?|#|\+?=)/;</div>
<div class="line">            my $operator = $1;</div>
<div class="line"></div>
<div class="line">            my $analyses = $self-&gt;collection_of( <span class="stringliteral">&#39;Analysis&#39;</span> )-&gt;find_all_by_pattern( $analyses_pattern );</div>
<div class="line">            print <span class="stringliteral">&quot;Tweak.Found   \t&quot;</span>.scalar(@$analyses).<span class="stringliteral">&quot; analyses matching the pattern &#39;$analyses_pattern&#39;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">            my $new_value = destringify( $new_value_str );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">foreach</span> my $analysis (@$analyses) {</div>
<div class="line"></div>
<div class="line">                my $analysis_name = $analysis-&gt;logic_name;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>( $attrib_name eq <span class="stringliteral">&#39;wait_for&#39;</span> ) {</div>
<div class="line"></div>
<div class="line">                    my $cr_collection   = $self-&gt;collection_of( <span class="stringliteral">&#39;AnalysisCtrlRule&#39;</span> );</div>
<div class="line">                    my $acr_collection  = $analysis-&gt;control_rules_collection;</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;?&#39;</span>) {</div>
<div class="line">                        print <span class="stringliteral">&quot;Tweak.Show    \tanalysis[$analysis_name].wait_for ::\t[&quot;</span>.join(<span class="stringliteral">&#39;, &#39;</span>, map { $_-&gt;condition_analysis_url } @$acr_collection ).<span class="stringliteral">&quot;]\n&quot;</span>;</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;#&#39;</span> or $operator eq <span class="charliteral">&#39;=&#39;</span>) {     # <span class="keyword">delete</span> the existing rules</div>
<div class="line">                        <span class="keywordflow">foreach</span> my $c_rule ( @$acr_collection ) {</div>
<div class="line">                            $cr_collection-&gt;forget_and_mark_for_deletion( $c_rule );</div>
<div class="line"></div>
<div class="line">                            print <span class="stringliteral">&quot;Tweak.Deleting\t&quot;</span>.$c_rule-&gt;toString.<span class="stringliteral">&quot; --&gt; (missing value)\n&quot;</span>;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;=&#39;</span> or $operator eq <span class="stringliteral">&#39;+=&#39;</span>) {     # create <span class="keyword">new</span> rules</div>
<div class="line">                        <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#af315d5018acfe01cade32e81ba0991e5">Bio::EnsEMBL::Hive::Utils::PCL::parse_wait_for</a>($self, $analysis, $new_value);</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                } elsif( $attrib_name eq <span class="stringliteral">&#39;flow_into&#39;</span> ) {</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;?&#39;</span>) {</div>
<div class="line">                        $analysis-&gt;print_diagram_node($self, <span class="stringliteral">&#39;&#39;</span>, {});</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;#&#39;</span> or $operator eq <span class="charliteral">&#39;=&#39;</span>) {     # <span class="keyword">delete</span> the existing rules</div>
<div class="line">                        my $dfr_collection = $self-&gt;collection_of( <span class="stringliteral">&#39;DataflowRule&#39;</span> );</div>
<div class="line">                        my $dft_collection = $self-&gt;collection_of( <span class="stringliteral">&#39;DataflowTarget&#39;</span> );</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">foreach</span> my $group ( @{$analysis-&gt;get_grouped_dataflow_rules} ) {</div>
<div class="line">                            my ($funnel_dfr, $fan_dfrs, $funnel_df_targets) = @$group;</div>
<div class="line"></div>
<div class="line">                            <span class="keywordflow">foreach</span> my $df_rule (@$fan_dfrs, $funnel_dfr) {</div>
<div class="line"></div>
<div class="line">                                <span class="keywordflow">foreach</span> my $df_target ( @{$df_rule-&gt;get_my_targets} ) {</div>
<div class="line">                                    $dft_collection-&gt;forget_and_mark_for_deletion( $df_target );</div>
<div class="line"></div>
<div class="line">                                    print <span class="stringliteral">&quot;Tweak.Deleting\t&quot;</span>.$df_target-&gt;toString.<span class="stringliteral">&quot; --&gt; (missing value)\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                $dfr_collection-&gt;forget_and_mark_for_deletion( $df_rule );</div>
<div class="line"></div>
<div class="line">                                print <span class="stringliteral">&quot;Tweak.Deleting\t&quot;</span>.$df_rule-&gt;toString.<span class="stringliteral">&quot; --&gt; (missing value)\n&quot;</span>;</div>
<div class="line">                            }</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;=&#39;</span> or $operator eq <span class="stringliteral">&#39;+=&#39;</span>) {     # create <span class="keyword">new</span> rules</div>
<div class="line">                        <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a3001688563385aae55faf7fd7a39e648">Bio::EnsEMBL::Hive::Utils::PCL::parse_flow_into</a>($self, $analysis, $new_value );</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">        } elsif($tweak=~/^analysis\[([^\]]+)\]\.(\w+)(\?|#|=(.+))$/) {</div>
<div class="line">            my ($analyses_pattern, $attrib_name, $operator, $new_value_str) = ($1, $2, $3, $4);</div>
<div class="line"></div>
<div class="line">            my $analyses = $self-&gt;collection_of( <span class="stringliteral">&#39;Analysis&#39;</span> )-&gt;find_all_by_pattern( $analyses_pattern );</div>
<div class="line">            print <span class="stringliteral">&quot;Tweak.Found   \t&quot;</span>.scalar(@$analyses).<span class="stringliteral">&quot; analyses matching the pattern &#39;$analyses_pattern&#39;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">            my $new_value = destringify( $new_value_str );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">foreach</span> my $analysis (@$analyses) {</div>
<div class="line"></div>
<div class="line">                my $analysis_name = $analysis-&gt;logic_name;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>( $attrib_name eq <span class="stringliteral">&#39;resource_class&#39;</span> ) {</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;?&#39;</span>) {</div>
<div class="line">                        <span class="keywordflow">if</span>(my $old_value = $analysis-&gt;resource_class) {</div>
<div class="line">                            print <span class="stringliteral">&quot;Tweak.Show    \tanalysis[$analysis_name].resource_class ::\t&quot;</span>.$old_value-&gt;name.<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                            print <span class="stringliteral">&quot;Tweak.Show    \tanalysis[$analysis_name].resource_class ::\t(missing value)\n&quot;</span>;</div>
<div class="line">                        }</div>
<div class="line">                    } elsif($operator eq <span class="charliteral">&#39;#&#39;</span>) {</div>
<div class="line">                        print <span class="stringliteral">&quot;Tweak.Error   \tDeleting of ResourceClasses is not supported\n&quot;</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">if</span>(my $old_value = $analysis-&gt;resource_class) {</div>
<div class="line">                            print <span class="stringliteral">&quot;Tweak.Changing\tanalysis[$analysis_name].resource_class ::\t&quot;</span>.$old_value-&gt;name.<span class="stringliteral">&quot; --&gt; $new_value_str\n&quot;</span>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                            print <span class="stringliteral">&quot;Tweak.Adding  \tanalysis[$analysis_name].resource_class ::\t(missing value) --&gt; $new_value_str\n&quot;</span>;    # <span class="keywordflow">do</span> we ever NOT have resource_class set?</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        my $resource_class;</div>
<div class="line">                        <span class="keywordflow">if</span>($resource_class = $self-&gt;collection_of( <span class="stringliteral">&#39;ResourceClass&#39;</span> )-&gt;find_one_by( <span class="stringliteral">&#39;name&#39;</span>, $new_value )) {</div>
<div class="line">                            print <span class="stringliteral">&quot;Tweak.Found   \tresource_class[$new_value_str]\n&quot;</span>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                            print <span class="stringliteral">&quot;Tweak.Adding  \tresource_class[$new_value_str]\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">                            ($resource_class) = $self-&gt;add_new_or_update( <span class="stringliteral">&#39;ResourceClass&#39;</span>,   # NB: <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a4462838d0383710b2b0e5088808b0bfb">add_new_or_update</a> returns a list</div>
<div class="line">                                <span class="stringliteral">&#39;name&#39;</span>  =&gt; $new_value,</div>
<div class="line">                            );</div>
<div class="line">                        }</div>
<div class="line">                        $analysis-&gt;resource_class( $resource_class );</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                } elsif($analysis-&gt;can($attrib_name)) {</div>
<div class="line">                    my $old_value = stringify($analysis-&gt;$attrib_name());</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;?&#39;</span>) {</div>
<div class="line">                        print <span class="stringliteral">&quot;Tweak.Show    \tanalysis[$analysis_name].$attrib_name ::\t$old_value\n&quot;</span>;</div>
<div class="line">                    } elsif($operator eq <span class="charliteral">&#39;#&#39;</span>) {</div>
<div class="line">                        print <span class="stringliteral">&quot;Tweak.Error   \tDeleting of Analysis attributes is not supported\n&quot;</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        print <span class="stringliteral">&quot;Tweak.Changing\tanalysis[$analysis_name].$attrib_name ::\t$old_value --&gt; &quot;</span>.stringify($new_value).<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">                        $analysis-&gt;$attrib_name( $new_value );</div>
<div class="line">                    }</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    print <span class="stringliteral">&quot;Tweak.Error   \tAnalysis does not support &#39;$attrib_name&#39; attribute\n&quot;</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">        } elsif($tweak=~/^resource_class\[([^\]]+)\]\.(\w+)(\?|=(.+))$/) {</div>
<div class="line">            my ($rc_pattern, $meadow_type, $operator, $new_value_str) = ($1, $2, $3, $4);</div>
<div class="line"></div>
<div class="line">            my $resource_classes = $self-&gt;collection_of( <span class="stringliteral">&#39;ResourceClass&#39;</span> )-&gt;find_all_by_pattern( $rc_pattern );</div>
<div class="line">            print <span class="stringliteral">&quot;Tweak.Found   \t&quot;</span>.scalar(@$resource_classes).<span class="stringliteral">&quot; resource_classes matching the pattern &#39;$rc_pattern&#39;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>($operator eq <span class="charliteral">&#39;?&#39;</span>) {</div>
<div class="line">                <span class="keywordflow">foreach</span> my $rc (@$resource_classes) {</div>
<div class="line">                    my $rc_name = $rc-&gt;name;</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>(my $rd = $self-&gt;collection_of( <span class="stringliteral">&#39;ResourceDescription&#39;</span> )-&gt;find_one_by(<span class="stringliteral">&#39;resource_class&#39;</span>, $rc, <span class="stringliteral">&#39;meadow_type&#39;</span>, $meadow_type)) {</div>
<div class="line">                        my ($submission_cmd_args, $worker_cmd_args) = ($rd-&gt;submission_cmd_args, $rd-&gt;worker_cmd_args);</div>
<div class="line">                        print <span class="stringliteral">&quot;Tweak.Show    \tresource_class[$rc_name].$meadow_type ::\t&quot;</span>.stringify([$submission_cmd_args, $worker_cmd_args]).<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        print <span class="stringliteral">&quot;Tweak.Show    \tresource_class[$rc_name].$meadow_type ::\t(missing values)\n&quot;</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">                my $new_value = destringify( $new_value_str );</div>
<div class="line">                my ($new_submission_cmd_args, $new_worker_cmd_args) = (ref($new_value) eq &#39;ARRAY&#39;) ? @$new_value : ($new_value, &#39;&#39;);</div>
<div class="line"></div>
<div class="line">                foreach my $rc (@$resource_classes) {</div>
<div class="line">                    my $rc_name = $rc-&gt;name;</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>(my $rd = $self-&gt;collection_of( <span class="stringliteral">&#39;ResourceDescription&#39;</span> )-&gt;find_one_by(<span class="stringliteral">&#39;resource_class&#39;</span>, $rc, <span class="stringliteral">&#39;meadow_type&#39;</span>, $meadow_type)) {</div>
<div class="line">                        my ($submission_cmd_args, $worker_cmd_args) = ($rd-&gt;submission_cmd_args, $rd-&gt;worker_cmd_args);</div>
<div class="line">                        print <span class="stringliteral">&quot;Tweak.Changing\tresource_class[$rc_name].meadow :: &quot;</span></div>
<div class="line">                                .stringify([$submission_cmd_args, $worker_cmd_args]).<span class="stringliteral">&quot; --&gt; &quot;</span></div>
<div class="line">                                .stringify([$new_submission_cmd_args, $new_worker_cmd_args]).<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">                        $rd-&gt;submission_cmd_args(   $new_submission_cmd_args );</div>
<div class="line">                        $rd-&gt;worker_cmd_args(       $new_worker_cmd_args     );</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        print <span class="stringliteral">&quot;Tweak.Adding  \tresource_class[$rc_name].meadow :: (missing values) --&gt; &quot;</span></div>
<div class="line">                                .stringify([$new_submission_cmd_args, $new_worker_cmd_args]).<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">                        my ($rd) = $self-&gt;add_new_or_update( <span class="stringliteral">&#39;ResourceDescription&#39;</span>,   # NB: <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a4462838d0383710b2b0e5088808b0bfb">add_new_or_update</a> returns a list</div>
<div class="line">                            <span class="stringliteral">&#39;resource_class&#39;</span>        =&gt; $rc,</div>
<div class="line">                            <span class="stringliteral">&#39;meadow_type&#39;</span>           =&gt; $meadow_type,</div>
<div class="line">                            <span class="stringliteral">&#39;submission_cmd_args&#39;</span>   =&gt; $new_submission_cmd_args,</div>
<div class="line">                            <span class="stringliteral">&#39;worker_cmd_args&#39;</span>       =&gt; $new_worker_cmd_args,</div>
<div class="line">                        );</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            print <span class="stringliteral">&quot;Tweak.Error   \tFailed to parse the tweak\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="aeefe79cc2cf756544a7221f267d4ba42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::collection_of </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-collection_of" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-collection_of-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-collection_of-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-collection_of-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#aeefe79cc2cf756544a7221f267d4ba42">collection_of</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line">    my $type = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (@_) {</div>
<div class="line">        $self-&gt;{<span class="stringliteral">&#39;_cache_by_class&#39;</span>}-&gt;{$type} = shift @_;</div>
<div class="line">    } elsif (not $self-&gt;{<span class="stringliteral">&#39;_cache_by_class&#39;</span>}-&gt;{$type}) {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( (my $hive_dba = $self-&gt;hive_dba) and ($type ne <span class="stringliteral">&#39;NakedTable&#39;</span>) and ($type ne <span class="stringliteral">&#39;Accumulator&#39;</span>) ) {</div>
<div class="line">            my $adaptor = $hive_dba-&gt;get_adaptor( $type );</div>
<div class="line">            my $all_objects = $adaptor-&gt;fetch_all();</div>
<div class="line">            <span class="keywordflow">if</span>(@$all_objects and UNIVERSAL::can($all_objects-&gt;[0], <span class="stringliteral">&#39;hive_pipeline&#39;</span>) ) {</div>
<div class="line">                $_-&gt;hive_pipeline($self) <span class="keywordflow">for</span> @$all_objects;</div>
<div class="line">            }</div>
<div class="line">            $self-&gt;{<span class="stringliteral">&#39;_cache_by_class&#39;</span>}-&gt;{$type} = <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_collection.html">Bio::EnsEMBL::Hive::Utils::Collection</a>-&gt;<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_collection.html#a25a1723090346037dbaab4bba98f3dc3">new</a>( $all_objects );</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            $self-&gt;{<span class="stringliteral">&#39;_cache_by_class&#39;</span>}-&gt;{$type} = <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_collection.html">Bio::EnsEMBL::Hive::Utils::Collection</a>-&gt;<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_collection.html#a25a1723090346037dbaab4bba98f3dc3">new</a>();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;_cache_by_class&#39;</span>}-&gt;{$type};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ab72a467083ef8615659b889b5df406e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::display_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-display_name" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-display_name-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-display_name-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-display_name-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ab72a467083ef8615659b889b5df406e3">display_name</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(my $dbc = $self-&gt;hive_dba &amp;&amp; $self-&gt;hive_dba-&gt;dbc) {</div>
<div class="line">        <span class="keywordflow">return</span> $dbc-&gt;dbname . <span class="charliteral">&#39;@&#39;</span> .($dbc-&gt;host||<span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&#39;(unstored &#39;</span>.$self-&gt;hive_pipeline_name.<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a0fd8b2b6f44baf418c443fd60f7c98ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::find_by_query </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-find_by_query" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-find_by_query-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-find_by_query-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-find_by_query-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a0fd8b2b6f44baf418c443fd60f7c98ca">find_by_query</a> {</div>
<div class="line">    my $self            = shift @_;</div>
<div class="line">    my $query_params    = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(my $object_type = <span class="keyword">delete</span> $query_params-&gt;{<span class="stringliteral">&#39;object_type&#39;</span>}) {</div>
<div class="line">        my $object;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>($object_type eq <span class="stringliteral">&#39;Accumulator&#39;</span> or $object_type eq <span class="stringliteral">&#39;NakedTable&#39;</span>) {</div>
<div class="line"></div>
<div class="line">            unless($object = $self-&gt;collection_of($object_type)-&gt;find_one_by( %$query_params )) {</div>
<div class="line"></div>
<div class="line">                my @specific_adaptor_params = ($object_type eq <span class="stringliteral">&#39;NakedTable&#39;</span>) ? (<span class="stringliteral">&#39;table_name&#39;</span> =&gt; $query_params-&gt;{<span class="stringliteral">&#39;table_name&#39;</span>}) : ();</div>
<div class="line">                ($object) = $self-&gt;add_new_or_update( $object_type, # NB: <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a4462838d0383710b2b0e5088808b0bfb">add_new_or_update</a> returns a list</div>
<div class="line">                    %$query_params,</div>
<div class="line">                    $self-&gt;hive_dba ? (<span class="stringliteral">&#39;adaptor&#39;</span> =&gt; $self-&gt;hive_dba-&gt;get_adaptor($object_type, @specific_adaptor_params)) : (),</div>
<div class="line">                );</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            $object = $self-&gt;collection_of($object_type)-&gt;find_one_by( %$query_params );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $object || <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Could not find an &#39;$object_type&#39; object from query &quot;</span>.stringify($query_params).<span class="stringliteral">&quot; in &quot;</span>.$self-&gt;display_name);</div>
<div class="line"></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Could not find or guess the object_type from the query &quot;</span>.stringify($query_params).<span class="stringliteral">&quot; , so could not find the object&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="af9654827ef85b2e148a2d5dbe73fc5a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::get_source_analyses </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: returns a listref of analyses that do not have local inflow ("source analyses")</pre><pre> </pre><div id="codesection-get_source_analyses" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-get_source_analyses-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_source_analyses-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_source_analyses-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#af9654827ef85b2e148a2d5dbe73fc5a9">get_source_analyses</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    my (%refset_of_analyses) = map { (<span class="stringliteral">&quot;$_&quot;</span> =&gt; $_) } $self-&gt;collection_of( <span class="stringliteral">&#39;Analysis&#39;</span> )-&gt;list;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $df_target ($self-&gt;collection_of( <span class="stringliteral">&#39;DataflowTarget&#39;</span> )-&gt;list) {</div>
<div class="line">        <span class="keyword">delete</span> $refset_of_analyses{ $df_target-&gt;to_analysis };</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> [ values %refset_of_analyses ];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a86f93d8dd0743b0e6df80e333040a65c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::hive_auto_rebalance_semaphores </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: getter/setter via <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_meta_parameters.html">MetaParameters</a>. Defines whether beekeeper should attempt to rebalance semaphores on each iteration.</pre><pre> </pre><div id="codesection-hive_auto_rebalance_semaphores" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-hive_auto_rebalance_semaphores-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-hive_auto_rebalance_semaphores-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-hive_auto_rebalance_semaphores-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a86f93d8dd0743b0e6df80e333040a65c">hive_auto_rebalance_semaphores</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;_meta_value_by_key(<span class="stringliteral">&#39;hive_auto_rebalance_semaphores&#39;</span>, @_) <span class="comment">// &#39;0&#39;;</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a062182d1ab903af52151fad31f43c720"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::hive_dba </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-hive_dba" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-hive_dba-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-hive_dba-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-hive_dba-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a062182d1ab903af52151fad31f43c720">hive_dba</a> {      # The adaptor <span class="keywordflow">for</span> HivePipeline objects</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(@_) {</div>
<div class="line">        $self-&gt;{<span class="stringliteral">&#39;_hive_dba&#39;</span>} = shift @_;</div>
<div class="line">        $self-&gt;{<span class="stringliteral">&#39;_hive_dba&#39;</span>}-&gt;hive_pipeline($self) <span class="keywordflow">if</span> $self-&gt;{<span class="stringliteral">&#39;_hive_dba&#39;</span>};</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;_hive_dba&#39;</span>};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ab79e3b15691f8124c902858843eb4642"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::hive_pipeline_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: getter/setter via <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_meta_parameters.html">MetaParameters</a>. Defines the symbolic name of the pipeline.</pre><pre> </pre><div id="codesection-hive_pipeline_name" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-hive_pipeline_name-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-hive_pipeline_name-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-hive_pipeline_name-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ab79e3b15691f8124c902858843eb4642">hive_pipeline_name</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;_meta_value_by_key(<span class="stringliteral">&#39;hive_pipeline_name&#39;</span>, @_) <span class="comment">// &#39;&#39;;</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ab27f77421e1aa02add3b98a317ac86c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::hive_sql_schema_version </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: getter via <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_meta_parameters.html">MetaParameters</a>. Defines the <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive.html">Hive</a> SQL schema version of the database if it has been stored</pre><pre> </pre><div id="codesection-hive_sql_schema_version" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-hive_sql_schema_version-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-hive_sql_schema_version-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-hive_sql_schema_version-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ab27f77421e1aa02add3b98a317ac86c5">hive_sql_schema_version</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(@_) {</div>
<div class="line">        <span class="keywordflow">throw</span>(<span class="stringliteral">&#39;HivePipeline::hive_sql_schema_version is not settable, it is only a getter&#39;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;_meta_value_by_key(<span class="stringliteral">&#39;hive_sql_schema_version&#39;</span>) <span class="comment">// &#39;N/A&#39;;</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ad46849b18dba756c5807c5c2f7975ed9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::hive_use_param_stack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: getter/setter via <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_meta_parameters.html">MetaParameters</a>. Defines which one of two modes of parameter propagation is used in this pipeline</pre><pre> </pre><div id="codesection-hive_use_param_stack" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-hive_use_param_stack-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-hive_use_param_stack-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-hive_use_param_stack-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ad46849b18dba756c5807c5c2f7975ed9">hive_use_param_stack</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;_meta_value_by_key(<span class="stringliteral">&#39;hive_use_param_stack&#39;</span>, @_) <span class="comment">// 0;</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="aa2359ac73d27df69b00e10ee0b1477c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::hive_use_triggers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: getter via <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_meta_parameters.html">MetaParameters</a>. Defines whether SQL triggers are used to automatically update <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_analysis_stats.html">AnalysisStats</a> counters</pre><pre> </pre><div id="codesection-hive_use_triggers" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-hive_use_triggers-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-hive_use_triggers-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-hive_use_triggers-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#aa2359ac73d27df69b00e10ee0b1477c3">hive_use_triggers</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(@_) {</div>
<div class="line">        <span class="keywordflow">throw</span>(<span class="stringliteral">&#39;HivePipeline::hive_use_triggers is not settable, it is only a getter&#39;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;_meta_value_by_key(<span class="stringliteral">&#39;hive_use_triggers&#39;</span>) <span class="comment">// &#39;0&#39;;</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ada3f8744b8a7a35d4539987c04505830"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::invalidate_collections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-invalidate_collections" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-invalidate_collections-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-invalidate_collections-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-invalidate_collections-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#ada3f8744b8a7a35d4539987c04505830">invalidate_collections</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{<span class="stringliteral">&#39;_cache_by_class&#39;</span>};</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="acdd4bc73a3c624c23ea5f8a764713abb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::list_all_hive_tables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: getter via <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_meta_parameters.html">MetaParameters</a>. Lists the (MySQL) table names used by the <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html">HivePipeline</a></pre><pre> </pre><div id="codesection-list_all_hive_tables" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-list_all_hive_tables-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-list_all_hive_tables-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-list_all_hive_tables-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#acdd4bc73a3c624c23ea5f8a764713abb">list_all_hive_tables</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(@_) {</div>
<div class="line">        <span class="keywordflow">throw</span>(<span class="stringliteral">&#39;HivePipeline::list_all_hive_tables is not settable, it is only a getter&#39;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> [ split /,/, ($self-&gt;_meta_value_by_key(<span class="stringliteral">&#39;hive_all_base_tables&#39;</span>) <span class="comment">// &#39;&#39;) ];</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a6bd4c18923e66f4f01df0395026bfa62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::list_all_hive_views </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: getter via <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_meta_parameters.html">MetaParameters</a>. Lists the (MySQL) view names used by the <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html">HivePipeline</a></pre><pre> </pre><div id="codesection-list_all_hive_views" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-list_all_hive_views-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-list_all_hive_views-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-list_all_hive_views-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a6bd4c18923e66f4f01df0395026bfa62">list_all_hive_views</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(@_) {</div>
<div class="line">        <span class="keywordflow">throw</span>(<span class="stringliteral">&#39;HivePipeline::list_all_hive_views is not settable, it is only a getter&#39;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> [ split /,/, ($self-&gt;_meta_value_by_key(<span class="stringliteral">&#39;hive_all_views&#39;</span>) <span class="comment">// &#39;&#39;) ];</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a1d9f11c3864d9c8acd2571557c702be7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::new </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-new" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-new-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <span class="keyword">new</span> {       # construct an attached or a detached Pipeline <span class="keywordtype">object</span></div>
<div class="line">    my $class           = shift @_;</div>
<div class="line"></div>
<div class="line">    my $self = bless {}, $class;</div>
<div class="line"></div>
<div class="line">    my %dba_flags           = @_;</div>
<div class="line">    my $existing_dba        = <span class="keyword">delete</span> $dba_flags{<span class="stringliteral">&#39;-dba&#39;</span>};</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(%dba_flags) {</div>
<div class="line">        my $hive_dba    = <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_d_b_adaptor.html">Bio::EnsEMBL::Hive::DBSQL::DBAdaptor</a>-&gt;<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_d_b_adaptor.html#abf2b541c5d7e3b124323a34356e3ace6">new</a>( %dba_flags );</div>
<div class="line">        $self-&gt;hive_dba( $hive_dba );</div>
<div class="line">    } elsif ($existing_dba) {</div>
<div class="line">        $self-&gt;hive_dba( $existing_dba );</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="preprocessor">#       warn &quot;Created a standalone pipeline&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a28bc98bca99a65646b7ec46c28ca5f08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::params_as_hash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: returns the destringified contents of the '<a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_pipeline_wide_parameters.html">PipelineWideParameters</a>' collection as a hash</pre><pre> </pre><div id="codesection-params_as_hash" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-params_as_hash-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-params_as_hash-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-params_as_hash-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a28bc98bca99a65646b7ec46c28ca5f08">params_as_hash</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    my $collection = $self-&gt;collection_of( <span class="stringliteral">&#39;PipelineWideParameters&#39;</span> );</div>
<div class="line">    <span class="keywordflow">return</span> { map { $_-&gt;{<span class="stringliteral">&#39;param_name&#39;</span>} =&gt; destringify($_-&gt;{<span class="stringliteral">&#39;param_value&#39;</span>}) } $collection-&gt;list() };</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a70e2871060467212cdbefed17aa80ebf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::print_diagram </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description: prints a "Unicode art" textual representation of the pipeline's flow diagram</pre><pre> </pre><div id="codesection-print_diagram" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-print_diagram-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-print_diagram-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-print_diagram-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a70e2871060467212cdbefed17aa80ebf">print_diagram</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    print <span class="stringliteral">&#39;&#39;</span>.(<span class="stringliteral">&#39;&#39;</span>x20).<span class="stringliteral">&#39;[ &#39;</span>.$self-&gt;display_name.<span class="stringliteral">&#39; ]&#39;</span>.(<span class="stringliteral">&#39;&#39;</span>x20).<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">    my %seen = ();</div>
<div class="line">    <span class="keywordflow">foreach</span> my $source_analysis ( @{ $self-&gt;get_source_analyses } ) {</div>
<div class="line">        print <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">        $source_analysis-&gt;print_diagram_node($self, <span class="stringliteral">&#39;&#39;</span>, \%seen);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">foreach</span> my $cyclic_analysis ( $self-&gt;collection_of( <span class="stringliteral">&#39;Analysis&#39;</span> )-&gt;list ) {</div>
<div class="line">        next <span class="keywordflow">if</span> $seen{$cyclic_analysis};</div>
<div class="line">        print <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">        $cyclic_analysis-&gt;print_diagram_node($self, <span class="stringliteral">&#39;&#39;</span>, \%seen);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a74dca8d32aacd114a85074f020cfdd54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::HivePipeline::save_collections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-save_collections" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-save_collections-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-save_collections-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-save_collections-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html#a74dca8d32aacd114a85074f020cfdd54">save_collections</a> {</div>
<div class="line">    my $self = shift @_;</div>
<div class="line"></div>
<div class="line">    my $hive_dba = $self-&gt;hive_dba();</div>
<div class="line"></div>
<div class="line">    my @adaptor_types = (<span class="stringliteral">&#39;MetaParameters&#39;</span>, <span class="stringliteral">&#39;PipelineWideParameters&#39;</span>, <span class="stringliteral">&#39;ResourceClass&#39;</span>, <span class="stringliteral">&#39;ResourceDescription&#39;</span>, <span class="stringliteral">&#39;Analysis&#39;</span>, <span class="stringliteral">&#39;AnalysisStats&#39;</span>, <span class="stringliteral">&#39;AnalysisCtrlRule&#39;</span>, <span class="stringliteral">&#39;DataflowRule&#39;</span>, <span class="stringliteral">&#39;DataflowTarget&#39;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $AdaptorType (reverse @adaptor_types) {</div>
<div class="line">        my $adaptor = $hive_dba-&gt;get_adaptor( $AdaptorType );</div>
<div class="line">        my $coll    = $self-&gt;collection_of( $AdaptorType );</div>
<div class="line">        <span class="keywordflow">if</span>( my $dark_collection = $coll-&gt;dark_collection) {</div>
<div class="line">            <span class="keywordflow">foreach</span> my $obj_to_be_deleted ( $coll-&gt;dark_collection-&gt;list ) {</div>
<div class="line">                $adaptor-&gt;remove( $obj_to_be_deleted );</div>
<div class="line"><span class="preprocessor">#                warn &quot;Deleted &quot;.(UNIVERSAL::can($obj_to_be_deleted, &#39;toString&#39;) ? $obj_to_be_deleted-&gt;toString : stringify($obj_to_be_deleted)).&quot;\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>            }</div>
<div class="line">            $coll-&gt;dark_collection( undef );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $AdaptorType (@adaptor_types) {</div>
<div class="line">        my $adaptor = $hive_dba-&gt;get_adaptor( $AdaptorType );</div>
<div class="line">        my $class   = <span class="stringliteral">&#39;Bio::EnsEMBL::Hive::&#39;</span>.$AdaptorType;</div>
<div class="line">        my $coll    = $self-&gt;collection_of( $AdaptorType );</div>
<div class="line">        <span class="keywordflow">foreach</span> my $storable_object ( $coll-&gt;list ) {</div>
<div class="line">            $adaptor-&gt;store_or_update_one( $storable_object, $class-&gt;unikey() );</div>
<div class="line"><span class="preprocessor">#            warn &quot;Stored/updated &quot;.$storable_object-&gt;toString().&quot;\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $job_adaptor = $hive_dba-&gt;get_AnalysisJobAdaptor;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $analysis ( $self-&gt;collection_of( <span class="stringliteral">&#39;Analysis&#39;</span> )-&gt;list ) {</div>
<div class="line">        <span class="keywordflow">if</span>(my $our_jobs = $analysis-&gt;jobs_collection ) {</div>
<div class="line">            $job_adaptor-&gt;store( $our_jobs );</div>
<div class="line">            <span class="keywordflow">foreach</span> my $job (@$our_jobs) {</div>
<div class="line"><span class="preprocessor">#                warn &quot;Stored &quot;.$job-&gt;toString().&quot;\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>modules/Bio/EnsEMBL/Hive/<a class="el" href="_hive_pipeline_8pm.html">HivePipeline.pm</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_bio.html">Bio</a></li><li class="navelem"><a class="el" href="namespace_bio_1_1_ens_e_m_b_l.html">EnsEMBL</a></li><li class="navelem"><a class="el" href="namespace_bio_1_1_ens_e_m_b_l_1_1_hive.html">Hive</a></li><li class="navelem"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_hive_pipeline.html">HivePipeline</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
