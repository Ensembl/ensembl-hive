<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ensembl-hive: Bio::EnsEMBL::Hive::Utils::PCL Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ensembl-hive
   &#160;<span id="projectnumber">2.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Bio::EnsEMBL::Hive::Utils::PCL Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2070f0d353a4ce7a8cc7aeec02a1ebfd"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a2070f0d353a4ce7a8cc7aeec02a1ebfd">WHEN</a> ()</td></tr>
<tr class="separator:a2070f0d353a4ce7a8cc7aeec02a1ebfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ffbcf74c10e9fe146d9a6a833debb3c"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a3ffbcf74c10e9fe146d9a6a833debb3c">ELSE</a> ()</td></tr>
<tr class="separator:a3ffbcf74c10e9fe146d9a6a833debb3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac3ad622d81a585cde4a51edaf1ea797"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#aac3ad622d81a585cde4a51edaf1ea797">INPUT_PLUS</a> ()</td></tr>
<tr class="separator:aac3ad622d81a585cde4a51edaf1ea797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af315d5018acfe01cade32e81ba0991e5"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#af315d5018acfe01cade32e81ba0991e5">parse_wait_for</a> ()</td></tr>
<tr class="separator:af315d5018acfe01cade32e81ba0991e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3001688563385aae55faf7fd7a39e648"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a3001688563385aae55faf7fd7a39e648">parse_flow_into</a> ()</td></tr>
<tr class="separator:a3001688563385aae55faf7fd7a39e648"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="Description"></a>
Description</h1>
 <pre>
    This module deals with parsing pipeline configuration files written in Perl-based "PipeConfig Language"

</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3ffbcf74c10e9fe146d9a6a833debb3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::PCL::ELSE </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-ELSE" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-ELSE-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-ELSE-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-ELSE-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a3ffbcf74c10e9fe146d9a6a833debb3c">ELSE</a> ($) {</div>
<div class="line">    my ($foo) = @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> (undef, $foo);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="aac3ad622d81a585cde4a51edaf1ea797"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::PCL::INPUT_PLUS </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-INPUT_PLUS" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-INPUT_PLUS-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-INPUT_PLUS-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-INPUT_PLUS-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#aac3ad622d81a585cde4a51edaf1ea797">INPUT_PLUS</a> {</div>
<div class="line">    my $template = shift @_ <span class="comment">// &#39;&#39;;</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="charliteral">&#39;+&#39;</span>.(ref($template) ? <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils.html#a38ef61e77ea6ba6bb1e08c35228cb7c3">stringify</a>($template) : $template);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a3001688563385aae55faf7fd7a39e648"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::PCL::parse_flow_into </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-parse_flow_into" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-parse_flow_into-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-parse_flow_into-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-parse_flow_into-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a3001688563385aae55faf7fd7a39e648">parse_flow_into</a> {</div>
<div class="line">    my ($pipeline, $from_analysis, $flow_into) = @_;</div>
<div class="line"></div>
<div class="line">    $flow_into   = { 1 =&gt; $flow_into } unless(ref($flow_into) eq <span class="stringliteral">&#39;HASH&#39;</span>); # force non-hash into a hash</div>
<div class="line"></div>
<div class="line">    my %group_tag_to_funnel_dataflow_rule = ();</div>
<div class="line"></div>
<div class="line">    my $semaphore_sign = <span class="stringliteral">&#39;-&gt;&#39;</span>;</div>
<div class="line"></div>
<div class="line">    my @all_branch_tags = keys %$flow_into;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $branch_tag ((grep {/^[A-Z]$semaphore_sign/} @all_branch_tags), (grep {/$semaphore_sign[A-Z]$/} @all_branch_tags), (grep {!/$semaphore_sign/} @all_branch_tags)) {</div>
<div class="line"></div>
<div class="line">        my ($branch_name_or_code, $group_role, $group_tag);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>($branch_tag=~/^([A-Z])$semaphore_sign(-?\w+)$/) {</div>
<div class="line">            ($branch_name_or_code, $group_role, $group_tag) = ($2, <span class="stringliteral">&#39;funnel&#39;</span>, $1);</div>
<div class="line">        } elsif($branch_tag=~/^(-?\w+)$semaphore_sign([A-Z])$/) {</div>
<div class="line">            ($branch_name_or_code, $group_role, $group_tag) = ($1, <span class="stringliteral">&#39;fan&#39;</span>, $2);</div>
<div class="line">        } elsif($branch_tag=~/^(-?\w+)$/) {</div>
<div class="line">            ($branch_name_or_code, $group_role, $group_tag) = ($1, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line">        } elsif($branch_tag=~/:/) {</div>
<div class="line">            die <span class="stringliteral">&quot;Please use newer &#39;2${semaphore_sign}A&#39; and &#39;A${semaphore_sign}1&#39; notation instead of &#39;2:1&#39; and &#39;1&#39;\n&quot;</span>;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            die <span class="stringliteral">&quot;Error parsing the group tag &#39;$branch_tag&#39;\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        my $funnel_dataflow_rule = undef;    # NULL by <span class="keywordflow">default</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>($group_role eq <span class="stringliteral">&#39;fan&#39;</span>) {</div>
<div class="line">            unless($funnel_dataflow_rule = $group_tag_to_funnel_dataflow_rule{$group_tag}) {</div>
<div class="line">                die <span class="stringliteral">&quot;No funnel dataflow_rule defined for group &#39;$group_tag&#39;\n&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        my $pre_cond_groups = $flow_into-&gt;{$branch_tag};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # [first pass] force pre_cond_groups into a list:</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span>( !ref($pre_cond_groups)                  # a scalar (a single target)</div>
<div class="line">         or (ref($pre_cond_groups) eq <span class="stringliteral">&#39;HASH&#39;</span>)       # a hash (a combination of targets with templates)</div>
<div class="line">         or ((ref($pre_cond_groups) eq <span class="stringliteral">&#39;ARRAY&#39;</span>) and !ref($pre_cond_groups-&gt;[0]) and ($pre_cond_groups-&gt;[0] eq $cond_group_marker)) # a single <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a2070f0d353a4ce7a8cc7aeec02a1ebfd">WHEN</a> group</div>
<div class="line">        ) {</div>
<div class="line">            $pre_cond_groups = [ $pre_cond_groups ];</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        my @uniform_cond_groups = ();</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # [second pass] rework them into a true list of WHEN-groups:</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">foreach</span> my $pre_group (@$pre_cond_groups) {</div>
<div class="line">            <span class="keywordflow">if</span>( !ref($pre_group) ) {                                            # wrap the scalar:</div>
<div class="line">                push @uniform_cond_groups, <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a2070f0d353a4ce7a8cc7aeec02a1ebfd">WHEN</a>( <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a3ffbcf74c10e9fe146d9a6a833debb3c">ELSE</a>( $pre_group ));</div>
<div class="line">            } elsif( ref($pre_group) eq <span class="stringliteral">&#39;HASH&#39;</span>) {                               # <span class="keywordflow">break</span> up the hash and wrap the parts:</div>
<div class="line">                <span class="keywordflow">while</span>(my ($target, $templates) = each %$pre_group) {</div>
<div class="line">                    $templates = [$templates] unless(ref($templates) eq <span class="stringliteral">&#39;ARRAY&#39;</span>);</div>
<div class="line">                    push @uniform_cond_groups, map { <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a2070f0d353a4ce7a8cc7aeec02a1ebfd">WHEN</a>( <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a3ffbcf74c10e9fe146d9a6a833debb3c">ELSE</a>( { $target =&gt; $_ } )) } @$templates;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {                                                            # keep the <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a2070f0d353a4ce7a8cc7aeec02a1ebfd">WHEN</a> groups unchanged</div>
<div class="line">                push @uniform_cond_groups, $pre_group;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> my $cond_group (@uniform_cond_groups) {</div>
<div class="line"></div>
<div class="line">            unless(ref($cond_group) eq <span class="stringliteral">&#39;ARRAY&#39;</span>) {</div>
<div class="line">                use Data::Dumper;</div>
<div class="line">                die <span class="stringliteral">&quot;Expecting ARRAYref, but got &quot;</span>.Dumper($cond_group).<span class="stringliteral">&quot; instead.&quot;</span>;</div>
<div class="line">            }</div>
<div class="line"><span class="preprocessor">                # chop the condition group marker off:</span></div>
<div class="line"><span class="preprocessor"></span>            my $this_cond_group_marker = shift @$cond_group;</div>
<div class="line">            die <span class="stringliteral">&quot;Expecting $cond_group_marker, got $this_cond_group_marker&quot;</span> unless($this_cond_group_marker eq $cond_group_marker);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">while</span>(@$cond_group) {</div>
<div class="line">                my $on_condition    = shift @$cond_group;</div>
<div class="line">                my $heirs           = shift @$cond_group;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">                    # force anything else to the common denominator format:</span></div>
<div class="line"><span class="preprocessor"></span>                $heirs = [ $heirs ] unless(ref($heirs));</div>
<div class="line">                $heirs = { map { ($_ =&gt; undef) } @$heirs } <span class="keywordflow">if</span>(ref($heirs) eq <span class="stringliteral">&#39;ARRAY&#39;</span>);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">while</span>(my ($heir_url, $input_id_template_list) = each %$heirs) {</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>($heir_url =~ m{^\w+$/}) {</div>
<div class="line">                        my $heir_analysis = $pipeline-&gt;collection_of(<span class="stringliteral">&#39;Analysis&#39;</span>)-&gt;find_one_by(<span class="stringliteral">&#39;logic_name&#39;</span>, $heir_url)</div>
<div class="line">                            or die <span class="stringliteral">&quot;Could not find a local analysis named &#39;$heir_url&#39; (dataflow from analysis &#39;&quot;</span>.($from_analysis-&gt;logic_name).<span class="stringliteral">&quot;&#39;)\n&quot;</span>;</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    $input_id_template_list = [ $input_id_template_list ] unless(ref($input_id_template_list) eq <span class="stringliteral">&#39;ARRAY&#39;</span>);  # allow <span class="keywordflow">for</span> more than one <span class="keyword">template</span> per analysis</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">foreach</span> my $input_id_template (@$input_id_template_list) {</div>
<div class="line"></div>
<div class="line">                        my $template_string = (ref($input_id_template) ? <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils.html#a38ef61e77ea6ba6bb1e08c35228cb7c3">stringify</a>($input_id_template) : $input_id_template);</div>
<div class="line">                        my $extend_param_stack = ($template_string &amp;&amp; $template_string=~s/^\+(.*)$/$1/) ? 1 : 0;</div>
<div class="line"></div>
<div class="line">                        my ($df_target) = $pipeline-&gt;add_new_or_update( <span class="stringliteral">&#39;DataflowTarget&#39;</span>,   # NB: add_new_or_update returns a list</div>
<div class="line">                            <span class="stringliteral">&#39;source_dataflow_rule&#39;</span>      =&gt; undef,           # NB: had to create the <span class="stringliteral">&quot;suspended targets&quot;</span> to <span class="keywordflow">break</span> the dependence circle</div>
<div class="line">                            <span class="stringliteral">&#39;on_condition&#39;</span>              =&gt; $on_condition,</div>
<div class="line">                            <span class="stringliteral">&#39;input_id_template&#39;</span>         =&gt; $template_string,</div>
<div class="line">                            <span class="stringliteral">&#39;extend_param_stack&#39;</span>        =&gt; $extend_param_stack,</div>
<div class="line">                            <span class="stringliteral">&#39;to_analysis_url&#39;</span>           =&gt; $heir_url,</div>
<div class="line">                        );</div>
<div class="line"></div>
<div class="line">                    } # /<span class="keywordflow">for</span> all templates</div>
<div class="line">                } # /<span class="keywordflow">for</span> all heirs</div>
<div class="line">            } # /<span class="keywordflow">for each</span> condition and heir</div>
<div class="line"></div>
<div class="line">            my $suspended_targets = $pipeline-&gt;collection_of(<span class="stringliteral">&#39;DataflowTarget&#39;</span>)-&gt;find_all_by( <span class="stringliteral">&#39;source_dataflow_rule&#39;</span>, undef );</div>
<div class="line"></div>
<div class="line">            my ($df_rule, $df_rule_is_new) = $pipeline-&gt;add_new_or_update( <span class="stringliteral">&#39;DataflowRule&#39;</span>,   # NB: add_new_or_update returns a list</div>
<div class="line">                <span class="stringliteral">&#39;from_analysis&#39;</span>             =&gt; $from_analysis,</div>
<div class="line">                <span class="stringliteral">&#39;branch_code&#39;</span>               =&gt; $branch_name_or_code,</div>
<div class="line">                <span class="stringliteral">&#39;funnel_dataflow_rule&#39;</span>      =&gt; $funnel_dataflow_rule,</div>
<div class="line">                <span class="stringliteral">&#39;unitargets&#39;</span>                =&gt; <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_dataflow_rule.html">Bio::EnsEMBL::Hive::DataflowRule</a>-&gt;unitargets($suspended_targets),</div>
<div class="line">#                <span class="stringliteral">&#39;unitargets&#39;</span>                =&gt; $suspended_targets,</div>
<div class="line">            );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>( $df_rule_is_new ) {</div>
<div class="line">                <span class="keywordflow">foreach</span> my $suspended_target (@$suspended_targets) {</div>
<div class="line">                    $suspended_target-&gt;source_dataflow_rule( $df_rule );</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordflow">foreach</span> my $suspended_target (@$suspended_targets) {</div>
<div class="line">                    $pipeline-&gt;collection_of(<span class="stringliteral">&#39;DataflowTarget&#39;</span>)-&gt;forget( $suspended_target );</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>($group_role eq <span class="stringliteral">&#39;funnel&#39;</span>) {</div>
<div class="line">                <span class="keywordflow">if</span>($group_tag_to_funnel_dataflow_rule{$group_tag}) {</div>
<div class="line">                    die <span class="stringliteral">&quot;More than one funnel dataflow_rule defined for group &#39;$group_tag&#39;\n&quot;</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $group_tag_to_funnel_dataflow_rule{$group_tag} = $df_rule;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        } # /<span class="keywordflow">foreach</span> $cond_group</div>
<div class="line"></div>
<div class="line">    } # /<span class="keywordflow">for</span> all branch_tags</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="af315d5018acfe01cade32e81ba0991e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::PCL::parse_wait_for </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-parse_wait_for" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-parse_wait_for-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-parse_wait_for-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-parse_wait_for-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#af315d5018acfe01cade32e81ba0991e5">parse_wait_for</a> {</div>
<div class="line">    my ($pipeline, $ctrled_analysis, $wait_for) = @_;</div>
<div class="line"></div>
<div class="line">    $wait_for ||= [];</div>
<div class="line">    $wait_for   = [ $wait_for ] unless(ref($wait_for) eq <span class="stringliteral">&#39;ARRAY&#39;</span>); # force scalar into an arrayref</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # create control rules:</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $condition_url (@$wait_for) {</div>
<div class="line">        <span class="keywordflow">if</span>($condition_url =~ m{^\w+$/}) {</div>
<div class="line">            my $condition_analysis = $pipeline-&gt;collection_of(<span class="stringliteral">&#39;Analysis&#39;</span>)-&gt;find_one_by(<span class="stringliteral">&#39;logic_name&#39;</span>, $condition_url)</div>
<div class="line">                or die <span class="stringliteral">&quot;Could not find a local analysis &#39;$condition_url&#39; to create a control rule (in &#39;&quot;</span>.($ctrled_analysis-&gt;logic_name).<span class="stringliteral">&quot;&#39;)\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        my ($c_rule) = $pipeline-&gt;add_new_or_update( <span class="stringliteral">&#39;AnalysisCtrlRule&#39;</span>,   # NB: add_new_or_update returns a list</div>
<div class="line">                <span class="stringliteral">&#39;condition_analysis_url&#39;</span>    =&gt; $condition_url,</div>
<div class="line">                <span class="stringliteral">&#39;ctrled_analysis&#39;</span>           =&gt; $ctrled_analysis,</div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a2070f0d353a4ce7a8cc7aeec02a1ebfd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::Utils::PCL::WHEN </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-WHEN" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-WHEN-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-WHEN-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-WHEN-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html#a2070f0d353a4ce7a8cc7aeec02a1ebfd">WHEN</a> {</div>
<div class="line">    <span class="keywordflow">return</span> [ $cond_group_marker, @_ ];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>modules/Bio/EnsEMBL/Hive/Utils/<a class="el" href="_p_c_l_8pm.html">PCL.pm</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_bio.html">Bio</a></li><li class="navelem"><a class="el" href="namespace_bio_1_1_ens_e_m_b_l.html">EnsEMBL</a></li><li class="navelem"><a class="el" href="namespace_bio_1_1_ens_e_m_b_l_1_1_hive.html">Hive</a></li><li class="navelem"><a class="el" href="namespace_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils.html">Utils</a></li><li class="navelem"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_utils_1_1_p_c_l.html">PCL</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
