<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ensembl-hive: Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ensembl-hive
   &#160;<span id="projectnumber">2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection__inherit__graph.png" border="0" usemap="#_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection_inherit__map" alt="Inheritance graph"/></div>
<map name="_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection_inherit__map" id="_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection_inherit__map">
<area shape="rect" id="node3" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_d_b_connection.html" title="Bio::EnsEMBL::Hive\l::DBSQL::DBConnection" alt="" coords="20,187,188,229"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection__coll__graph.png" border="0" usemap="#_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection_coll__map" alt="Collaboration graph"/></div>
<map name="_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection_coll__map" id="_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a293fae7f0ab19f7fc708fb5b507ba148"><td class="memItemLeft" align="right" valign="top">public <br class="typebreak"/>
Bio::EnsEMBL::DBSQL::DBConnection&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a293fae7f0ab19f7fc708fb5b507ba148">new</a> ()</td></tr>
<tr class="separator:a293fae7f0ab19f7fc708fb5b507ba148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06a88cf2f46772a4b1a5d780ffcb4242"><td class="memItemLeft" align="right" valign="top">public void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a06a88cf2f46772a4b1a5d780ffcb4242">connect</a> ()</td></tr>
<tr class="separator:a06a88cf2f46772a4b1a5d780ffcb4242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5898fcb340f9986c023175115ef20a0"><td class="memItemLeft" align="right" valign="top">public Undef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#ad5898fcb340f9986c023175115ef20a0">connected</a> ()</td></tr>
<tr class="separator:ad5898fcb340f9986c023175115ef20a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69ef6c7a72bc1ef00fbb690fb6382823"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a69ef6c7a72bc1ef00fbb690fb6382823">disconnect_count</a> ()</td></tr>
<tr class="separator:a69ef6c7a72bc1ef00fbb690fb6382823"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d2360ccf06ccac4f3a392c59e4af615"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a9d2360ccf06ccac4f3a392c59e4af615">wait_timeout</a> ()</td></tr>
<tr class="separator:a9d2360ccf06ccac4f3a392c59e4af615"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a273d7e5246bf1823445181da78b88e87"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a273d7e5246bf1823445181da78b88e87">query_count</a> ()</td></tr>
<tr class="separator:a273d7e5246bf1823445181da78b88e87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4942dd4cf65e6e94ac8a3135853e4314"><td class="memItemLeft" align="right" valign="top">public Boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a4942dd4cf65e6e94ac8a3135853e4314">equals</a> ()</td></tr>
<tr class="separator:a4942dd4cf65e6e94ac8a3135853e4314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a497b676b381ee418552294fbe96defbd"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a497b676b381ee418552294fbe96defbd">driver</a> ()</td></tr>
<tr class="separator:a497b676b381ee418552294fbe96defbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a993dc991ecc4b0ee07918d06ef593c23"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a993dc991ecc4b0ee07918d06ef593c23">port</a> ()</td></tr>
<tr class="separator:a993dc991ecc4b0ee07918d06ef593c23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd4957f557ed09dbe208712c213e9adf"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#afd4957f557ed09dbe208712c213e9adf">dbname</a> ()</td></tr>
<tr class="separator:afd4957f557ed09dbe208712c213e9adf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a656ac0a564c773ba2127d48da4821510"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a656ac0a564c773ba2127d48da4821510">username</a> ()</td></tr>
<tr class="separator:a656ac0a564c773ba2127d48da4821510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a813db671a4662cbc118b36ac9955e2ab"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a813db671a4662cbc118b36ac9955e2ab">user</a> ()</td></tr>
<tr class="separator:a813db671a4662cbc118b36ac9955e2ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52db0b1ea34968d7f823d74aa6de462a"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a52db0b1ea34968d7f823d74aa6de462a">host</a> ()</td></tr>
<tr class="separator:a52db0b1ea34968d7f823d74aa6de462a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a716c1f4c6dab3f80cb8ba46fb95b2835"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a716c1f4c6dab3f80cb8ba46fb95b2835">hostname</a> ()</td></tr>
<tr class="separator:a716c1f4c6dab3f80cb8ba46fb95b2835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a937f0123792e1af1529c2e15b759340b"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a937f0123792e1af1529c2e15b759340b">password</a> ()</td></tr>
<tr class="separator:a937f0123792e1af1529c2e15b759340b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaefbe50ce59eb9a4446a91dde9610bd2"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#aaefbe50ce59eb9a4446a91dde9610bd2">pass</a> ()</td></tr>
<tr class="separator:aaefbe50ce59eb9a4446a91dde9610bd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac11755609bcdb2855feb9ac1ffb2b22f"><td class="memItemLeft" align="right" valign="top">public Boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#ac11755609bcdb2855feb9ac1ffb2b22f">disconnect_when_inactive</a> ()</td></tr>
<tr class="separator:ac11755609bcdb2855feb9ac1ffb2b22f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7537c0fac89789eba198006c7b1dfbf8"><td class="memItemLeft" align="right" valign="top">public Boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a7537c0fac89789eba198006c7b1dfbf8">reconnect_when_lost</a> ()</td></tr>
<tr class="separator:a7537c0fac89789eba198006c7b1dfbf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33c540b343d16f5f0f00247c692d1752"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a33c540b343d16f5f0f00247c692d1752">locator</a> ()</td></tr>
<tr class="separator:a33c540b343d16f5f0f00247c692d1752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca48fddb8caeef6f023b0f355359623"><td class="memItemLeft" align="right" valign="top">public DBI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a8ca48fddb8caeef6f023b0f355359623">db_handle</a> ()</td></tr>
<tr class="separator:a8ca48fddb8caeef6f023b0f355359623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1271fb70594db9741a5f6a1de7a6765f"><td class="memItemLeft" align="right" valign="top">public DBI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a1271fb70594db9741a5f6a1de7a6765f">prepare</a> ()</td></tr>
<tr class="separator:a1271fb70594db9741a5f6a1de7a6765f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedf6ea5fb297d8ef9276d9bc016336c1"><td class="memItemLeft" align="right" valign="top">public void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#aedf6ea5fb297d8ef9276d9bc016336c1">reconnect</a> ()</td></tr>
<tr class="separator:aedf6ea5fb297d8ef9276d9bc016336c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dc722d1dd6516ad7ed6d4df2f2b461d"><td class="memItemLeft" align="right" valign="top">public Result&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a0dc722d1dd6516ad7ed6d4df2f2b461d">do</a> ()</td></tr>
<tr class="separator:a0dc722d1dd6516ad7ed6d4df2f2b461d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1e7d1b09012f716c7860e6eb7c71e13"><td class="memItemLeft" align="right" valign="top">public Any&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#ac1e7d1b09012f716c7860e6eb7c71e13">work_with_db_handle</a> ()</td></tr>
<tr class="separator:ac1e7d1b09012f716c7860e6eb7c71e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c086bf7eca0f812311bf381c862e5c1"><td class="memItemLeft" align="right" valign="top">public void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a3c086bf7eca0f812311bf381c862e5c1">prevent_disconnect</a> ()</td></tr>
<tr class="separator:a3c086bf7eca0f812311bf381c862e5c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a9d2cfe84a134fdf678ba566582bf5f"><td class="memItemLeft" align="right" valign="top">public Boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a4a9d2cfe84a134fdf678ba566582bf5f">disconnect_if_idle</a> ()</td></tr>
<tr class="separator:a4a9d2cfe84a134fdf678ba566582bf5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a646a94723dda7c144400a87c67816e68"><td class="memItemLeft" align="right" valign="top">public SQLStatement&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a646a94723dda7c144400a87c67816e68">add_limit_clause</a> ()</td></tr>
<tr class="separator:a646a94723dda7c144400a87c67816e68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3d9aebeba7a86e48cc7c1ebe2934b27"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#aa3d9aebeba7a86e48cc7c1ebe2934b27">from_date_to_seconds</a> ()</td></tr>
<tr class="separator:aa3d9aebeba7a86e48cc7c1ebe2934b27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7abaf113d8686eaa7112c6fe9616dd99"><td class="memItemLeft" align="right" valign="top">public String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a7abaf113d8686eaa7112c6fe9616dd99">from_seconds_to_date</a> ()</td></tr>
<tr class="separator:a7abaf113d8686eaa7112c6fe9616dd99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="Synopsis"></a>
Synopsis</h1>
<div class="fragment"><div class="line">$dbc = Bio::EnsEMBL::DBSQL::DBConnection-&gt;new(</div>
<div class="line">  -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a813db671a4662cbc118b36ac9955e2ab">user</a>   =&gt; <span class="stringliteral">&#39;anonymous&#39;</span>,</div>
<div class="line">  -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#afd4957f557ed09dbe208712c213e9adf">dbname</a> =&gt; <span class="stringliteral">&#39;homo_sapiens_core_20_34c&#39;</span>,</div>
<div class="line">  -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a52db0b1ea34968d7f823d74aa6de462a">host</a>   =&gt; <span class="stringliteral">&#39;ensembldb.ensembl.org&#39;</span>,</div>
<div class="line">  -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a497b676b381ee418552294fbe96defbd">driver</a> =&gt; <span class="stringliteral">&#39;mysql&#39;</span>,</div>
<div class="line">);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># SQL statements should be created/executed through this modules</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># prepare() and do() methods.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">$sth = $dbc-&gt;prepare(<span class="stringliteral">&quot;SELECT something FROM yourtable&quot;</span>);</div>
<div class="line"></div>
<div class="line">$sth-&gt;execute();</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># do something with rows returned ...</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">$sth-&gt;finish();</div>
</div><!-- fragment --> <h1><a class="anchor" id="Description"></a>
Description</h1>
 <pre>
This class is a wrapper around DBIs datbase handle.  It provides some
additional functionality such as the ability to automatically disconnect
when inactive and reconnect when needed.

Generally this class will be used through one of the object adaptors or
the Bio::EnsEMBL::Registry and will not be instantiated directly.

</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a646a94723dda7c144400a87c67816e68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public SQLStatement Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::add_limit_clause </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : string $sql
  Arg [2]    : int $max_number
  Example    :</pre><div class="fragment"><div class="line">my $new_sql = $dbc-&gt;add_limit_clause($sql,$max_number);</div>
</div><!-- fragment --> <pre>  Description: Giving an SQL statement, it adds a limit clause, dependent on the database 
               (in MySQL, should add a LIMIT at the end, MSSQL uses a TOP clause)                                    
  Returntype : String containing the new valid SQL statement        
  Exceptions : none
  Caller     : general
  Status     : at risk</pre><pre> </pre><div id="codesection-add_limit_clause" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-add_limit_clause-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-add_limit_clause-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-add_limit_clause-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a646a94723dda7c144400a87c67816e68">add_limit_clause</a>{</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $sql = shift;</div>
<div class="line">    my $max_number = shift;</div>
<div class="line"></div>
<div class="line">    my $new_sql = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;driver eq <span class="stringliteral">&#39;mysql&#39;</span>){</div>
<div class="line">        $new_sql = $sql . <span class="stringliteral">&#39; LIMIT &#39;</span> . $max_number;</div>
<div class="line">    }</div>
<div class="line">    elsif ($self-&gt;driver eq <span class="stringliteral">&#39;odbc&#39;</span>){</div>
<div class="line"><span class="preprocessor">        #need to get anything after the SELECT statement</span></div>
<div class="line"><span class="preprocessor"></span>        $sql =~ /select(.*)/i;</div>
<div class="line">        $new_sql = <span class="stringliteral">&#39;SELECT TOP &#39;</span> . $max_number . $1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span>{</div>
<div class="line">        warn(<span class="stringliteral">&quot;Not possible to convert $sql to an unknow database driver: &quot;</span>, $self-&gt;driver, <span class="stringliteral">&quot; no limit applied&quot;</span>);</div>
<div class="line">        $new_sql = $sql;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> $new_sql;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a06a88cf2f46772a4b1a5d780ffcb4242"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public void Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::connect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Example    :</pre><div class="fragment"><div class="line">$dbcon-&gt;connect()</div>
</div><!-- fragment --> <pre>  Description: Connects to the database using the connection attribute 
               information.
  Returntype : none
  Exceptions : none
  Caller     : new, db_handle
  Status     : Stable</pre><pre> </pre><div id="codesection-connect" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-connect-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-connect-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-connect-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a06a88cf2f46772a4b1a5d780ffcb4242">connect</a> {</div>
<div class="line">  my ($self) = @_;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ( $self-&gt;connected() ) { <span class="keywordflow">return</span> }</div>
<div class="line"></div>
<div class="line">  $self-&gt;connected(1);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ( defined( $self-&gt;db_handle() ) and $self-&gt;db_handle()-&gt;ping() ) {</div>
<div class="line">    warn(   <span class="stringliteral">&quot;unconnected db_handle is still pingable, &quot;</span></div>
<div class="line">             . <span class="stringliteral">&quot;reseting connected boolean\n&quot;</span> );</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  my ( $dsn, $dbh );</div>
<div class="line">  my $dbname = $self-&gt;dbname();</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ( $self-&gt;driver() eq <span class="stringliteral">&quot;Oracle&quot;</span> ) {</div>
<div class="line"></div>
<div class="line">    $dsn = <span class="stringliteral">&quot;DBI:Oracle:&quot;</span>;</div>
<div class="line"></div>
<div class="line">    eval {</div>
<div class="line">      $dbh = DBI-&gt;connect( $dsn,</div>
<div class="line">                           sprintf( <span class="stringliteral">&quot;%s@%s&quot;</span>,</div>
<div class="line">                                    $self-&gt;username(), $dbname ),</div>
<div class="line">                           $self-&gt;password(),</div>
<div class="line">                           { <span class="stringliteral">&#39;RaiseError&#39;</span> =&gt; 1, <span class="stringliteral">&#39;PrintError&#39;</span> =&gt; 0 } );</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">  } elsif ( $self-&gt;driver() eq <span class="stringliteral">&quot;ODBC&quot;</span> ) {</div>
<div class="line"></div>
<div class="line">    $dsn = sprintf( <span class="stringliteral">&quot;DBI:ODBC:%s&quot;</span>, $self-&gt;dbname() );</div>
<div class="line"></div>
<div class="line">    eval {</div>
<div class="line">      $dbh = DBI-&gt;connect( $dsn,</div>
<div class="line">                           $self-&gt;username(),</div>
<div class="line">                           $self-&gt;password(), {</div>
<div class="line">                             <span class="stringliteral">&#39;LongTruncOk&#39;</span>     =&gt; 1,</div>
<div class="line">                             <span class="stringliteral">&#39;LongReadLen&#39;</span>     =&gt; 2**16 - 8,</div>
<div class="line">                             <span class="stringliteral">&#39;RaiseError&#39;</span>      =&gt; 1,</div>
<div class="line">                             <span class="stringliteral">&#39;PrintError&#39;</span>      =&gt; 0,</div>
<div class="line">                             <span class="stringliteral">&#39;odbc_cursortype&#39;</span> =&gt; 2 } );</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">  } elsif ( $self-&gt;driver() eq <span class="stringliteral">&quot;Sybase&quot;</span> ) {</div>
<div class="line">    my $dbparam = ($dbname) ? <span class="stringliteral">&quot;;database=${dbname}&quot;</span> : q{};</div>
<div class="line"></div>
<div class="line">    $dsn = sprintf( <span class="stringliteral">&quot;DBI:Sybase:server=%s%s;tdsLevel=CS_TDS_495&quot;</span>,</div>
<div class="line">                    $self-&gt;host(), $dbparam );</div>
<div class="line"></div>
<div class="line">    eval {</div>
<div class="line">      $dbh = DBI-&gt;connect( $dsn,</div>
<div class="line">                           $self-&gt;username(),</div>
<div class="line">                           $self-&gt;password(), {</div>
<div class="line">                             <span class="stringliteral">&#39;LongTruncOk&#39;</span> =&gt; 1,</div>
<div class="line">                             <span class="stringliteral">&#39;RaiseError&#39;</span>  =&gt; 1,</div>
<div class="line">                             <span class="stringliteral">&#39;PrintError&#39;</span>  =&gt; 0 } );</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">  } elsif ( lc( $self-&gt;driver() ) eq <span class="stringliteral">&#39;sqlite&#39;</span> ) {</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">throw</span> <span class="stringliteral">&quot;We require a dbname to connect to a SQLite database&quot;</span></div>
<div class="line">      <span class="keywordflow">if</span> !$dbname;</div>
<div class="line"></div>
<div class="line">    $dsn = sprintf( <span class="stringliteral">&quot;DBI:SQLite:%s&quot;</span>, $dbname );</div>
<div class="line"></div>
<div class="line">    eval {</div>
<div class="line">      $dbh = DBI-&gt;connect( $dsn, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, { <span class="stringliteral">&#39;RaiseError&#39;</span> =&gt; 1, } );</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">    my $dbparam = ($dbname) ? <span class="stringliteral">&quot;database=${dbname};&quot;</span> : q{};</div>
<div class="line"></div>
<div class="line">    my $driver = $self-&gt;driver();</div>
<div class="line">    $driver = <span class="stringliteral">&#39;Pg&#39;</span> <span class="keywordflow">if</span>($driver eq <span class="stringliteral">&#39;pgsql&#39;</span>);</div>
<div class="line"></div>
<div class="line">    $dsn = sprintf( <span class="stringliteral">&quot;DBI:%s:%shost=%s;port=%s&quot;</span>,</div>
<div class="line">                    $driver, $dbparam,</div>
<div class="line">                    $self-&gt;host(),   $self-&gt;port() );</div>
<div class="line"></div>
<div class="line">    eval {</div>
<div class="line">      $dbh = DBI-&gt;connect( $dsn, $self-&gt;username(), $self-&gt;password(),</div>
<div class="line">                           { <span class="stringliteral">&#39;RaiseError&#39;</span> =&gt; 1 } );</div>
<div class="line">    };</div>
<div class="line">  }</div>
<div class="line">  my $error = $@;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ( !$dbh || $error || !$dbh-&gt;ping() ) {</div>
<div class="line">    warn(   <span class="stringliteral">&quot;Could not connect to database &quot;</span></div>
<div class="line">          . $self-&gt;dbname()</div>
<div class="line">          . <span class="stringliteral">&quot; as user &quot;</span></div>
<div class="line">          . $self-&gt;username()</div>
<div class="line">          . <span class="stringliteral">&quot; using [$dsn] as a locator:\n&quot;</span></div>
<div class="line">          . $error );</div>
<div class="line"></div>
<div class="line">    $self-&gt;connected(0);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">throw</span>(   <span class="stringliteral">&quot;Could not connect to database &quot;</span></div>
<div class="line">           . $self-&gt;dbname()</div>
<div class="line">           . <span class="stringliteral">&quot; as user &quot;</span></div>
<div class="line">           . $self-&gt;username()</div>
<div class="line">           . <span class="stringliteral">&quot; using [$dsn] as a locator:\n&quot;</span></div>
<div class="line">           . $error );</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  $self-&gt;db_handle($dbh);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ( $self-&gt;wait_timeout() ) {</div>
<div class="line">    my $driver = $self-&gt;driver();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( $driver eq <span class="stringliteral">&#39;mysql&#39;</span> ) {</div>
<div class="line">        $dbh-&gt;do( <span class="stringliteral">&quot;SET SESSION wait_timeout=&quot;</span> . $self-&gt;wait_timeout() );</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        warn <span class="stringliteral">&quot;Don&#39;t know how to set the wait_timeout for &#39;$driver&#39; driver, skipping.\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">  #print(&quot;CONNECT\n&quot;);</span></div>
<div class="line"><span class="preprocessor">} ## end sub connect</span></div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ad5898fcb340f9986c023175115ef20a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Undef Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::connected </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Example    :</pre><div class="fragment"><div class="line">$dbcon-&gt;connected()</div>
</div><!-- fragment --> <pre>  Description: Boolean which tells if <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_d_b_connection.html">DBConnection</a> is connected or not.
               State is set internally, and external processes should not alter state.
  Returntype : undef or 1
  Exceptions : none
  Caller     : db_handle, connect, disconnect_if_idle, user processes
  Status     : Stable</pre><pre> </pre><div id="codesection-connected" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-connected-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-connected-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-connected-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#ad5898fcb340f9986c023175115ef20a0">connected</a> {</div>
<div class="line">  my $self = shift;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">  # Use the process id ($$) as part of the key for the connected flag.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">  # This forces the opening of another connection in a forked subprocess.</span></div>
<div class="line"><span class="preprocessor"></span>  $self-&gt;{<span class="stringliteral">&#39;connected&#39;</span>.$$} = shift <span class="keywordflow">if</span>(@_);</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;connected&#39;</span>.$$};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a8ca48fddb8caeef6f023b0f355359623"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public DBI Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::db_handle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : DBI Database Handle $value
  Example    :</pre><div class="fragment"><div class="line">$dbh = $db_connection-&gt;db_handle() </div>
</div><!-- fragment --> <pre>  Description: Getter / Setter for the Database handle used by this
               database connection.
  Returntype : DBI Database Handle
  Exceptions : none
  Caller     : new, DESTROY
  Status     : Stable</pre><pre> </pre><div id="codesection-db_handle" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-db_handle-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-db_handle-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-db_handle-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a8ca48fddb8caeef6f023b0f355359623">db_handle</a> {</div>
<div class="line">   my $self = shift;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">   # Use the process id ($$) as part of the key for the database handle</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">   # this makes this object fork safe.  fork() does not makes copies</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">   # of the open socket which creates problems when one of the forked</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">   # processes disconnects,</span></div>
<div class="line"><span class="preprocessor"></span>   <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;db_handle&#39;</span>.$$} = shift <span class="keywordflow">if</span>(@_);</div>
<div class="line">   <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;db_handle&#39;</span>.$$} <span class="keywordflow">if</span>($self-&gt;connected);</div>
<div class="line"></div>
<div class="line">   $self-&gt;connect();</div>
<div class="line">   <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;db_handle&#39;</span>.$$};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="afd4957f557ed09dbe208712c213e9adf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::dbname </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : (optional) string $arg
               The new value of the database name used by this connection. 
  Example    :</pre><div class="fragment"><div class="line">$dbname = $db_connection-&gt;dbname()</div>
</div><!-- fragment --> <pre>  Description: Getter/Setter for the name of the database used by this 
               connection.  There is currently no point in setting this value
               after the connection has already been established by the 
               constructor.
  Returntype : string
  Exceptions : none
  Caller     : new
  Status     : Stable</pre><pre> </pre><div id="codesection-dbname" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-dbname-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-dbname-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-dbname-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#afd4957f557ed09dbe208712c213e9adf">dbname</a> {</div>
<div class="line">  my ($self, $arg ) = @_;</div>
<div class="line">  ( defined $arg ) &amp;&amp;</div>
<div class="line">    ( $self-&gt;{_dbname} = $arg );</div>
<div class="line">  $self-&gt;{_dbname};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a69ef6c7a72bc1ef00fbb690fb6382823"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::disconnect_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-disconnect_count" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-disconnect_count-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-disconnect_count-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-disconnect_count-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a69ef6c7a72bc1ef00fbb690fb6382823">disconnect_count</a> {</div>
<div class="line">  my $self = shift;</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;disconnect_count&#39;</span>} = shift <span class="keywordflow">if</span>(@_);</div>
<div class="line">  $self-&gt;{<span class="stringliteral">&#39;disconnect_count&#39;</span>}=0 unless(defined($self-&gt;{<span class="stringliteral">&#39;disconnect_count&#39;</span>}));</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;disconnect_count&#39;</span>};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a4a9d2cfe84a134fdf678ba566582bf5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Boolean Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::disconnect_if_idle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : none
  Example    :</pre><div class="fragment"><div class="line">$dbc-&gt;disconnect_if_idle();</div>
</div><!-- fragment --> <pre>  Description: Disconnects from the database if there are no currently active
               statement handles. 
               It is called automatically by the DESTROY method of the
               <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_statement_handle.html">Bio::EnsEMBL::Hive::DBSQL::StatementHandle</a> if the
               disconect_when_inactive flag is set.
               Users may call it whenever they want to disconnect. Connection will
               reestablish on next access to <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a8ca48fddb8caeef6f023b0f355359623">db_handle()</a>
  Returntype : 1 or 0
               1=problem trying to disconnect while a statement handle was still active
  Exceptions : none
  Caller     : <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_statement_handle.html#a837ba155a662306e7cbd285fe0970269">Bio::EnsEMBL::Hive::DBSQL::StatementHandle::DESTROY</a>
               <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a0dc722d1dd6516ad7ed6d4df2f2b461d">Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::do</a>
  Status     : Stable</pre><pre> </pre><div id="codesection-disconnect_if_idle" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-disconnect_if_idle-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-disconnect_if_idle-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-disconnect_if_idle-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a4a9d2cfe84a134fdf678ba566582bf5f">disconnect_if_idle</a> {</div>
<div class="line">  my $self = shift;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0 <span class="keywordflow">if</span>(!$self-&gt;connected());</div>
<div class="line">  my $db_handle = $self-&gt;db_handle();</div>
<div class="line">  <span class="keywordflow">return</span> 0 unless(defined($db_handle));</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">  #printf(&quot;disconnect_if_idle : kids=%d activekids=%d\n&quot;,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">  #       $db_handle-&gt;{Kids}, $db_handle-&gt;{ActiveKids});</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">  #If InactiveDestroy is set, don&#39;t disconnect.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">  #To comply with DBI specification</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordflow">return</span> 0 <span class="keywordflow">if</span>($db_handle-&gt;{InactiveDestroy});</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">  #If any statement handles are still active, don&#39;t allow disconnection</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">  #In this case it is being called before a query has been fully processed</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">  #either by not reading all rows of data returned, or not calling -&gt;finish</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">  #on the statement handle.  Don&#39;t disconnect, send warning</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordflow">if</span>($db_handle-&gt;{ActiveKids} != 0) {</div>
<div class="line">     warn(<span class="stringliteral">&quot;Problem disconnect : kids=&quot;</span>,$db_handle-&gt;{Kids},</div>
<div class="line">            <span class="stringliteral">&quot; activekids=&quot;</span>,$db_handle-&gt;{ActiveKids},<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">     <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  $db_handle-&gt;disconnect();</div>
<div class="line">  $self-&gt;connected(undef);</div>
<div class="line">  $self-&gt;disconnect_count($self-&gt;disconnect_count()+1);</div>
<div class="line"><span class="preprocessor">  #print(&quot;DISCONNECT\n&quot;);</span></div>
<div class="line"><span class="preprocessor"></span>  $self-&gt;db_handle(undef);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ac11755609bcdb2855feb9ac1ffb2b22f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Boolean Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::disconnect_when_inactive </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : (optional) boolean $newval
  Example    :</pre><div class="fragment"><div class="line">$dbc-&gt;disconnect_when_inactive(1);</div>
</div><!-- fragment --> <pre>  Description: Getter/Setter for the disconnect_when_inactive flag.  If set
               to true this <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_d_b_connection.html">DBConnection</a> will continually disconnect itself
               when there are no active statement handles and reconnect as
               necessary.  Useful for farm environments when there can be
               many (often inactive) open connections to a database at once.
  Returntype : boolean
  Exceptions : none
  Caller     : <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_pipeline.html">Pipeline</a>
  Status     : Stable</pre><pre> </pre><div id="codesection-disconnect_when_inactive" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-disconnect_when_inactive-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-disconnect_when_inactive-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-disconnect_when_inactive-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#ac11755609bcdb2855feb9ac1ffb2b22f">disconnect_when_inactive</a> {</div>
<div class="line">  my ( $self, $value ) = @_;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ( defined($value) ) {</div>
<div class="line">    $self-&gt;{<span class="stringliteral">&#39;disconnect_when_inactive&#39;</span>} = $value;</div>
<div class="line">    <span class="keywordflow">if</span> ($value) {</div>
<div class="line">      $self-&gt;disconnect_if_idle();</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;disconnect_when_inactive&#39;</span>};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a0dc722d1dd6516ad7ed6d4df2f2b461d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Result Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::do </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : string $string
               the SQL statement to prepare
  Example    :</pre><div class="fragment"><div class="line">$sth = $db_connection-&gt;do(<span class="stringliteral">&quot;SELECT column FROM table&quot;</span>);</div>
</div><!-- fragment --> <pre>  Description: Executes a SQL statement using the internal DBI database handle.
  Returntype : Result of DBI dbh <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a0dc722d1dd6516ad7ed6d4df2f2b461d">do()</a> method
  Exceptions : thrown if the SQL statement is empty, or if the internal
               database handle is not present.
  Caller     : Adaptor modules
  Status     : Stable</pre><pre> </pre><div id="codesection-do" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-do-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-do-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-do-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <span class="keywordflow">do</span> {</div>
<div class="line">   my ($self,$string, $attr, @bind_values) = @_;</div>
<div class="line"></div>
<div class="line">   <span class="keywordflow">if</span>( ! $string ) {</div>
<div class="line">     <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Attempting to do an empty SQL query.&quot;</span>);</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">   # warn &quot;SQL(&quot;.$self-&gt;dbname.&quot;): $string&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>   my $error;</div>
<div class="line">   </div>
<div class="line">   my $do_result = $self-&gt;work_with_db_handle(sub {</div>
<div class="line">     my ($dbh) = @_;</div>
<div class="line">     my $result = eval { $dbh-&gt;do($string, $attr, @bind_values) };</div>
<div class="line">     $error = $@ <span class="keywordflow">if</span> $@;</div>
<div class="line">     <span class="keywordflow">return</span> $result;</div>
<div class="line">   });</div>
<div class="line">   </div>
<div class="line">   <span class="keywordflow">throw</span> <span class="stringliteral">&quot;Detected an error whilst executing statement &#39;$string&#39;: $error&quot;</span> <span class="keywordflow">if</span> $error;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> $do_result;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a497b676b381ee418552294fbe96defbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::driver </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : (optional) string $arg
               the name of the driver to use to connect to the database
  Example    :</pre><div class="fragment"><div class="line">$driver = $db_connection-&gt;driver()</div>
</div><!-- fragment --> <pre>  Description: Getter / Setter for the driver this connection uses.
               Right now there is no point to setting this value after a
               connection has already been established in the constructor.
  Returntype : string
  Exceptions : none
  Caller     : new
  Status     : Stable</pre><pre> </pre><div id="codesection-driver" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-driver-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-driver-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-driver-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a497b676b381ee418552294fbe96defbd">driver</a> {</div>
<div class="line">  my($self, $arg ) = @_;</div>
<div class="line"></div>
<div class="line">  (defined $arg) &amp;&amp;</div>
<div class="line">    ($self-&gt;{_driver} = $arg );</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{_driver};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a4942dd4cf65e6e94ac8a3135853e4314"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Boolean Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::equals </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Example    :</pre><div class="fragment"><div class="line">warn <span class="stringliteral">&#39;Same!&#39;</span> <span class="keywordflow">if</span>($dbc-&gt;equals($other_dbc));</div>
</div><!-- fragment --> <pre>  Description: Equality checker for <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_d_b_connection.html">DBConnection</a> objects
  Returntype : boolean
  Exceptions : none
  Caller     : new
  Status     : Stable</pre><pre> </pre><div id="codesection-equals" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-equals-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-equals-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-equals-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a4942dd4cf65e6e94ac8a3135853e4314">equals</a> {</div>
<div class="line">  my ( $self, $dbc ) = @_;</div>
<div class="line">  <span class="keywordflow">return</span> 0 <span class="keywordflow">if</span> ! defined $dbc;</div>
<div class="line">  my $return = 0;</div>
<div class="line">  my $undef_str = q{!-undef-!};</div>
<div class="line">  my $undef_num = -1;</div>
<div class="line"></div>
<div class="line">  $return = 1 <span class="keywordflow">if</span>  ( </div>
<div class="line">    (($self-&gt;host() || $undef_str)      eq ($dbc-&gt;host() || $undef_str)) &amp;&amp;</div>
<div class="line">    (($self-&gt;dbname() || $undef_str)    eq ($dbc-&gt;dbname() || $undef_str)) &amp;&amp;</div>
<div class="line">    (($self-&gt;port() || $undef_num)      == ($dbc-&gt;port() || $undef_num)) &amp;&amp;</div>
<div class="line">    (($self-&gt;username() || $undef_str)  eq ($dbc-&gt;username() || $undef_str)) &amp;&amp;</div>
<div class="line">    ($self-&gt;driver() eq $dbc-&gt;driver())</div>
<div class="line">  );</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> $return;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="aa3d9aebeba7a86e48cc7c1ebe2934b27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::from_date_to_seconds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : date $date
  Example    :</pre><div class="fragment"><div class="line">my $string = $dbc-&gt;from_date_to_seconds($date);</div>
</div><!-- fragment --> <pre>  Description: Giving a string representing a column of type date 
                applies the database function to convert to the number of seconds from 01-01-1970
  Returntype : string
  Exceptions : none
  Caller     : general
  Status     : at risk</pre><pre> </pre><div id="codesection-from_date_to_seconds" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-from_date_to_seconds-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-from_date_to_seconds-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-from_date_to_seconds-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#aa3d9aebeba7a86e48cc7c1ebe2934b27">from_date_to_seconds</a>{</div>
<div class="line">    my $self=  shift;</div>
<div class="line">    my $column = shift;</div>
<div class="line"></div>
<div class="line">    my $string;</div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;driver eq <span class="stringliteral">&#39;mysql&#39;</span>){</div>
<div class="line">        $string = <span class="stringliteral">&quot;UNIX_TIMESTAMP($column)&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    elsif ($self-&gt;driver eq <span class="stringliteral">&#39;odbc&#39;</span>){</div>
<div class="line">        $string = <span class="stringliteral">&quot;DATEDIFF(second,&#39;JAN 1 1970&#39;,$column)&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    elsif ($self-&gt;driver eq <span class="stringliteral">&#39;SQLite&#39;</span>){</div>
<div class="line">        $string = <span class="stringliteral">&quot;STRFTIME(&#39;%s&#39;, $column)&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span>{</div>
<div class="line">        warn(<span class="stringliteral">&quot;Not possible to convert $column due to an unknown database driver: &quot;</span>, $self-&gt;driver);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line">    }    </div>
<div class="line">    <span class="keywordflow">return</span> $string;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a7abaf113d8686eaa7112c6fe9616dd99"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::from_seconds_to_date </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : int $seconds
  Example    :</pre><div class="fragment"><div class="line">my $string = $dbc-&gt;from_seconds_to_date($seconds);</div>
</div><!-- fragment --> <pre>  Description: Giving an int representing number of seconds
                applies the database function to convert to a date 
  Returntype : string
  Exceptions : none
  Caller     : general
  Status     : at risk</pre><pre> </pre><div id="codesection-from_seconds_to_date" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-from_seconds_to_date-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-from_seconds_to_date-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-from_seconds_to_date-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a7abaf113d8686eaa7112c6fe9616dd99">from_seconds_to_date</a>{</div>
<div class="line">    my $self=  shift;</div>
<div class="line">    my $seconds = shift;</div>
<div class="line"></div>
<div class="line">    my $string;</div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;driver eq <span class="stringliteral">&#39;mysql&#39;</span>){</div>
<div class="line">        <span class="keywordflow">if</span> ($seconds){</div>
<div class="line">            $string = <span class="stringliteral">&quot;from_unixtime( &quot;</span>.$seconds.<span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span>{</div>
<div class="line">            $string = <span class="stringliteral">&quot;\&quot;0000-00-00 00:00:00\&quot;&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    elsif ($self-&gt;driver eq <span class="stringliteral">&#39;odbc&#39;</span>){</div>
<div class="line">        <span class="keywordflow">if</span> ($seconds){</div>
<div class="line">            $string = <span class="stringliteral">&quot;DATEDIFF(date,&#39;JAN 1 1970&#39;,$seconds)&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span>{</div>
<div class="line">            $string = <span class="stringliteral">&quot;\&quot;0000-00-00 00:00:00\&quot;&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    elsif ($self-&gt;driver eq <span class="stringliteral">&#39;SQLite&#39;</span>){</div>
<div class="line">        <span class="keywordflow">if</span> ($seconds){</div>
<div class="line">            $string = <span class="stringliteral">&quot;DATETIME($seconds)&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span>{</div>
<div class="line">            $string = <span class="stringliteral">&quot;\&quot;0000-00-00 00:00:00\&quot;&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span>{</div>
<div class="line">        warn(<span class="stringliteral">&quot;Not possible to convert $seconds due to an unknown database driver: &quot;</span>, $self-&gt;driver);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"></div>
<div class="line">    }    </div>
<div class="line">    <span class="keywordflow">return</span> $string;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a52db0b1ea34968d7f823d74aa6de462a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::host </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : (optional) string $arg
               The new value of the host used by this connection. 
  Example    :</pre><div class="fragment"><div class="line">$host = $db_connection-&gt;host()</div>
</div><!-- fragment --> <pre>  Description: Getter/Setter for the domain name of the database host use by 
               this connection.  There is currently no point in setting 
               this value after the connection has already been established 
               by the constructor.
  Returntype : string
  Exceptions : none
  Caller     : new
  Status     : Stable</pre><pre> </pre><div id="codesection-host" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-host-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-host-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-host-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a52db0b1ea34968d7f823d74aa6de462a">host</a> {</div>
<div class="line">  my ($self, $arg ) = @_;</div>
<div class="line">  ( defined $arg ) &amp;&amp;</div>
<div class="line">    ( $self-&gt;{_host} = $arg );</div>
<div class="line">  $self-&gt;{_host};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a716c1f4c6dab3f80cb8ba46fb95b2835"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::hostname </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : (optional) string $arg
               The new value of the host used by this connection. 
  Example    :</pre><div class="fragment"><div class="line">$hostname = $db_connection-&gt;hostname()</div>
</div><!-- fragment --> <pre>  Description: Convenience alias for the host method
  Returntype : String</pre><pre> </pre><div id="codesection-hostname" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-hostname-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-hostname-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-hostname-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a716c1f4c6dab3f80cb8ba46fb95b2835">hostname</a> {</div>
<div class="line">  my ($self, $arg) = @_;</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;host($arg);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a33c540b343d16f5f0f00247c692d1752"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::locator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : none
  Example    :</pre><div class="fragment"><div class="line">$locator = $dbc-&gt;locator;</div>
</div><!-- fragment --> <pre>  Description: Constructs a locator string for this database connection
               that can, for example, be used by the DBLoader module
  Returntype : string
  Exceptions : none
  Caller     : general
  Status     : Stable</pre><pre> </pre><div id="codesection-locator" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-locator-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-locator-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-locator-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a33c540b343d16f5f0f00247c692d1752">locator</a> {</div>
<div class="line">  my ($self) = @_;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> sprintf(</div>
<div class="line">    <span class="stringliteral">&quot;%s/host=%s;port=%s;dbname=%s;user=%s;pass=%s&quot;</span>,</div>
<div class="line">    ref($self),      $self-&gt;host(),     $self-&gt;port(),</div>
<div class="line">    $self-&gt;dbname(), $self-&gt;username(), $self-&gt;password() );</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a293fae7f0ab19f7fc708fb5b507ba148"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::DBSQL::DBConnection Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::new </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [DBNAME] : (optional) string
                 The name of the database to connect to.
  Arg [HOST] : (optional) string
               The domain name of the database host to connect to.  
               'localhost' by default. 
  Arg [USER] : string
               The name of the database user to connect with 
  Arg [PASS] : (optional) string
               The password to be used to connect to the database
  Arg [PORT] : (optional) int
               The port to use when connecting to the database
               3306 by default if the driver is mysql.
  Arg [DRIVER] : (optional) string
                 The type of database driver to use to connect to the DB
                 mysql by default.
  Arg [DBCONN] : (optional)
                 Open another handle to the same database as another connection
                 If this argument is specified, no other arguments should be
                 specified.
  Arg [DISCONNECT_WHEN_INACTIVE]: (optional) boolean
                 If set to true, the database connection will be disconnected
                 everytime there are no active statement handles. This is
                 useful when running a lot of jobs on a compute farm
                 which would otherwise keep open a lot of connections to the
                 database.  Database connections are automatically reopened
                 when required.Do not use this option together with RECONNECT_WHEN_LOST.
  Arg [WAIT_TIMEOUT]: (optional) integer
                 Time in seconds for the wait_timeout to happen. Time after which
                 the connection is deleted if not used. By default this is 28800 (8 hours)
                 on most systems. 
                 So set this to greater than this if your connection are getting deleted.
                 Only set this if you are having problems and know what you are doing.
  Arg [RECONNECT_WHEN_LOST]: (optional) boolean
                 In case you're reusing the same database connection, i.e. DISCONNECT_WHEN_INACTIVE is 
                 set to false and running a job which takes a long time to process (over 8hrs), 
                 which means that the db connection may be lost, set this option to true. 
                 On each prepare or do statement the db handle will be pinged and the database 
                 connection will be reconnected if it's lost.</pre><pre>  Example    :</pre><div class="fragment"><div class="line">$dbc = Bio::EnsEMBL::DBSQL::DBConnection-&gt;new</div>
<div class="line">                 (-<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a813db671a4662cbc118b36ac9955e2ab">user</a>   =&gt; <span class="stringliteral">&#39;anonymous&#39;</span>,</div>
<div class="line">                  -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#afd4957f557ed09dbe208712c213e9adf">dbname</a> =&gt; <span class="stringliteral">&#39;homo_sapiens_core_20_34c&#39;</span>,</div>
<div class="line">                  -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a52db0b1ea34968d7f823d74aa6de462a">host</a>   =&gt; <span class="stringliteral">&#39;ensembldb.ensembl.org&#39;</span>,</div>
<div class="line">                  -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a497b676b381ee418552294fbe96defbd">driver</a> =&gt; <span class="stringliteral">&#39;mysql&#39;</span>);</div>
</div><!-- fragment --> <pre>  Description: Constructor for a Database Connection. Any adaptors that require
               database connectivity should inherit from this class.
  Returntype : Bio::EnsEMBL::DBSQL::DBConnection
  Exceptions : thrown if USER or DBNAME are not specified, or if the database
               cannot be connected to.
  Caller     : Bio::EnsEMBL::Utils::ConfigRegistry ( for newer code using the registry)
               Bio::EnsEMBL::DBSQL::DBAdaptor        ( for old style code)
  Status     : Stable</pre><pre> </pre><div id="codesection-new" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-new-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <span class="keyword">new</span> {</div>
<div class="line">    my $class = shift @_;</div>
<div class="line">    my %flags = @_;</div>
<div class="line"></div>
<div class="line">    my ($driver, $user, $password, $host, $port, $dbname,</div>
<div class="line">        $dbconn, $disconnect_when_inactive, $wait_timeout, $reconnect_when_lost)</div>
<div class="line">     = @flags{qw(-<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a497b676b381ee418552294fbe96defbd">driver</a> -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a813db671a4662cbc118b36ac9955e2ab">user</a> -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#aaefbe50ce59eb9a4446a91dde9610bd2">pass</a> -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a52db0b1ea34968d7f823d74aa6de462a">host</a> -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a993dc991ecc4b0ee07918d06ef593c23">port</a> -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#afd4957f557ed09dbe208712c213e9adf">dbname</a> -dbconn</div>
<div class="line">                 -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#ac11755609bcdb2855feb9ac1ffb2b22f">disconnect_when_inactive</a> -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a9d2360ccf06ccac4f3a392c59e4af615">wait_timeout</a> -<a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a7537c0fac89789eba198006c7b1dfbf8">reconnect_when_lost</a>)};</div>
<div class="line"></div>
<div class="line">    my $self = {};</div>
<div class="line">    bless $self, $class;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>($dbconn) {</div>
<div class="line">    <span class="keywordflow">if</span>($dbname || $host || $driver || $password || $port || $disconnect_when_inactive || $reconnect_when_lost) {</div>
<div class="line">      <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Cannot specify other arguments when -DBCONN argument used.&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $self-&gt;driver($dbconn-&gt;driver());</div>
<div class="line">    $self-&gt;host($dbconn-&gt;host());</div>
<div class="line">    $self-&gt;port($dbconn-&gt;port());</div>
<div class="line">    $self-&gt;username($dbconn-&gt;username());</div>
<div class="line">    $self-&gt;password($dbconn-&gt;password());</div>
<div class="line">    $self-&gt;dbname($dbconn-&gt;dbname());</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>($dbconn-&gt;disconnect_when_inactive()) {</div>
<div class="line">      $self-&gt;disconnect_when_inactive(1);</div>
<div class="line">    }</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    $driver ||= <span class="stringliteral">&#39;mysql&#39;</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span>($driver eq <span class="stringliteral">&#39;mysql&#39;</span>) {</div>
<div class="line">        $user || <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;-USER argument is required.&quot;</span>);</div>
<div class="line">        $host ||= <span class="stringliteral">&#39;mysql&#39;</span>;</div>
<div class="line">        <span class="keywordflow">if</span>(!defined($port)){</div>
<div class="line">            $port   = 3306;</div>
<div class="line">            <span class="keywordflow">if</span>($host eq <span class="stringliteral">&quot;ensembldb.ensembl.org&quot;</span>){</div>
<div class="line">                <span class="keywordflow">if</span>( $dbname =~ /\w+_\w+_\w+_(\d+)/){</div>
<div class="line">                    <span class="keywordflow">if</span>($1 &gt;= 48){</div>
<div class="line">                        $port = 5306;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    } elsif($driver eq <span class="stringliteral">&#39;pgsql&#39;</span>) {</div>
<div class="line">        <span class="keywordflow">if</span>(!defined($port)){</div>
<div class="line">            $port   = 5432;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $self-&gt;driver($driver);</div>
<div class="line">    $self-&gt;host( $host );</div>
<div class="line">    $self-&gt;port($port);</div>
<div class="line">    $self-&gt;username( $user );</div>
<div class="line">    $self-&gt;password( $password );</div>
<div class="line">    $self-&gt;dbname( $dbname );</div>
<div class="line">    $self-&gt;wait_timeout($wait_timeout);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>($disconnect_when_inactive) {</div>
<div class="line">      $self-&gt;disconnect_when_inactive($disconnect_when_inactive);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span>($reconnect_when_lost) {</div>
<div class="line">      $self-&gt;reconnect_when_lost($reconnect_when_lost);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#  if(defined $dnadb) {</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    $self-&gt;dnadb($dnadb);</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  }</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordflow">return</span> $self;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="aaefbe50ce59eb9a4446a91dde9610bd2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::pass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : (optional) string $arg
               The new value of the password used by this connection. 
  Example    :</pre><div class="fragment"><div class="line">$pass = $db_connection-&gt;pass()</div>
</div><!-- fragment --> <pre>  Description: Convenience alias for the password method
  Returntype : String</pre><pre> </pre><div id="codesection-pass" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-pass-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-pass-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-pass-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#aaefbe50ce59eb9a4446a91dde9610bd2">pass</a> {</div>
<div class="line">  my ($self, $arg) = @_;</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;password($arg);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a937f0123792e1af1529c2e15b759340b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::password </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : (optional) string $arg
               The new value of the password used by this connection.
  Example    :</pre><div class="fragment"><div class="line">$host = $db_connection-&gt;password()</div>
</div><!-- fragment --> <pre>  Description: Getter/Setter for the password of to use for this
               connection.  There is currently no point in setting
               this value after the connection has already been
               established by the constructor.
  Returntype : string
  Exceptions : none
  Caller     : new
  Status     : Stable</pre><pre> </pre><div id="codesection-password" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-password-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-password-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-password-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a937f0123792e1af1529c2e15b759340b">password</a> {</div>
<div class="line">  my ( $self, $arg ) = @_;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ( defined($arg) ) {</div>
<div class="line"><span class="preprocessor">    # Use an anonymous subroutine that will return the password when</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # invoked.  This will prevent the password from being accidentally</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # displayed when using e.g. Data::Dumper on a structure containing</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # one of these objects.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    $self-&gt;{_password} = sub { $arg };</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> ( ref( $self-&gt;{_password} ) &amp;&amp; &amp;{ $self-&gt;{_password} } ) || <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a993dc991ecc4b0ee07918d06ef593c23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::port </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : (optional) int $arg
               the TCP or UDP port to use to connect to the database
  Example    :</pre><div class="fragment"><div class="line">$port = $db_connection-&gt;port();</div>
</div><!-- fragment --> <pre>  Description: Getter / Setter for the port this connection uses to communicate
               to the database daemon.  There currently is no point in 
               setting this value after the connection has already been 
               established by the constructor.
  Returntype : string
  Exceptions : none
  Caller     : new
  Status     : Stable</pre><pre> </pre><div id="codesection-port" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-port-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-port-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-port-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a993dc991ecc4b0ee07918d06ef593c23">port</a> {</div>
<div class="line">  my ( $self, $value ) = @_;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ( defined($value) ) {</div>
<div class="line">    $self-&gt;{<span class="stringliteral">&#39;_port&#39;</span>} = $value;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;_port&#39;</span>};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a1271fb70594db9741a5f6a1de7a6765f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public DBI Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::prepare </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : string $string
               the SQL statement to prepare
  Example    :</pre><div class="fragment"><div class="line">$sth = $db_connection-&gt;prepare(<span class="stringliteral">&quot;SELECT column FROM table&quot;</span>);</div>
</div><!-- fragment --> <pre>  Description: Prepares a SQL statement using the internal DBI database handle
               and returns the DBI statement handle.
  Returntype : DBI statement handle
  Exceptions : thrown if the SQL statement is empty, or if the internal
               database handle is not present
  Caller     : Adaptor modules
  Status     : Stable</pre><pre> </pre><div id="codesection-prepare" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-prepare-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-prepare-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-prepare-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a1271fb70594db9741a5f6a1de7a6765f">prepare</a> {</div>
<div class="line">   my ($self,@args) = @_;</div>
<div class="line"></div>
<div class="line">   <span class="keywordflow">if</span>( ! $args[0] ) {</div>
<div class="line">     <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Attempting to prepare an empty SQL query.&quot;</span>);</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">   #warn &quot;SQL(&quot;.$self-&gt;dbname.&quot;):&quot; . join(&#39; &#39;, @args) . &quot;\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>   <span class="keywordflow">if</span> ( ($self-&gt;reconnect_when_lost()) and (!$self-&gt;db_handle()-&gt;ping()) ) { </div>
<div class="line">       $self-&gt;reconnect();</div>
<div class="line">   }</div>
<div class="line">   my $sth = $self-&gt;db_handle-&gt;prepare(@args);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">   # return an overridden statement handle that provides us with</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">   # the means to disconnect inactive statement handles automatically</span></div>
<div class="line"><span class="preprocessor"></span>   bless $sth, <span class="stringliteral">&quot;Bio::EnsEMBL::Hive::DBSQL::StatementHandle&quot;</span>;</div>
<div class="line">   $sth-&gt;dbc($self);</div>
<div class="line">   $sth-&gt;sql($args[0]);</div>
<div class="line"></div>
<div class="line">   $self-&gt;query_count($self-&gt;query_count()+1);</div>
<div class="line">   <span class="keywordflow">return</span> $sth;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a3c086bf7eca0f812311bf381c862e5c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public void Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::prevent_disconnect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg[1]      : CodeRef $callback
  Example     :</pre><div class="fragment"><div class="line">$dbc-&gt;prevent_disconnect(sub { $dbc-&gt;do(<span class="stringliteral">&#39;do something&#39;</span>); $dbc-&gt;do(<span class="stringliteral">&#39;something else&#39;</span>)});</div>
</div><!-- fragment --> <pre>  Description : A wrapper method which prevents database disconnection for the
                duration of the callback. This is very useful if you need
                to make multiple database calls avoiding excessive database
                connection creation/destruction but still want the API
                to disconnect after the body of work.</pre><pre>                The value of <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#ac11755609bcdb2855feb9ac1ffb2b22f">disconnect_when_inactive()</a> is set to 0 no
                matter what the original value was &amp; after $callback has
                been executed. If <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#ac11755609bcdb2855feb9ac1ffb2b22f">disconnect_when_inactive()</a> was 
                already set to 0 then this method will be an effective no-op.
  Returntype  : None
  Exceptions  : Raised if there are issues with reverting the connection to its
                default state.
  Caller      : <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_d_b_connection.html">DBConnection</a> methods
  Status      : Beta</pre><pre> </pre><div id="codesection-prevent_disconnect" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-prevent_disconnect-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-prevent_disconnect-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-prevent_disconnect-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a3c086bf7eca0f812311bf381c862e5c1">prevent_disconnect</a> {</div>
<div class="line">  my ($self, $callback) = @_;</div>
<div class="line">  my $original_dwi = $self-&gt;disconnect_when_inactive();</div>
<div class="line">  $self-&gt;disconnect_when_inactive(0);</div>
<div class="line">  eval { $callback-&gt;(); };</div>
<div class="line">  my $original_error = $@;</div>
<div class="line">  eval {</div>
<div class="line">    $self-&gt;disconnect_when_inactive($original_dwi);    </div>
<div class="line">  };</div>
<div class="line">  <span class="keywordflow">if</span>($@) {</div>
<div class="line">    warn <span class="stringliteral">&quot;Detected an error whilst attempting to reset disconnect_when_idle: $@&quot;</span>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span>($original_error) {</div>
<div class="line">    <span class="keywordflow">throw</span> <span class="stringliteral">&quot;Detected an error when running DBI wrapper callback:\n$original_error&quot;</span>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a273d7e5246bf1823445181da78b88e87"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::query_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-query_count" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-query_count-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-query_count-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-query_count-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a273d7e5246bf1823445181da78b88e87">query_count</a> {</div>
<div class="line">  my $self = shift;</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;_query_count&#39;</span>} = shift <span class="keywordflow">if</span>(@_);</div>
<div class="line">  $self-&gt;{<span class="stringliteral">&#39;_query_count&#39;</span>}=0 unless(defined($self-&gt;{<span class="stringliteral">&#39;_query_count&#39;</span>}));</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;_query_count&#39;</span>};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="aedf6ea5fb297d8ef9276d9bc016336c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public void Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::reconnect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Example    :</pre><div class="fragment"><div class="line">$dbcon-&gt;reconnect()</div>
</div><!-- fragment --> <pre>  Description: Reconnects to the database using the connection attribute 
               information if db_handle no longer pingable.
  Returntype : none
  Exceptions : none
  Caller     : new, db_handle
  Status     : Stable</pre><pre> </pre><div id="codesection-reconnect" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-reconnect-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-reconnect-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-reconnect-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#aedf6ea5fb297d8ef9276d9bc016336c1">reconnect</a> {</div>
<div class="line">  my ($self) = @_;</div>
<div class="line">  $self-&gt;connected(undef);</div>
<div class="line">  $self-&gt;db_handle(undef);</div>
<div class="line">  $self-&gt;connect();</div>
<div class="line">  <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a7537c0fac89789eba198006c7b1dfbf8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Boolean Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::reconnect_when_lost </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : (optional) boolean $newval
  Example    :</pre><div class="fragment"><div class="line">$dbc-&gt;reconnect_when_lost(1);</div>
</div><!-- fragment --> <pre>  Description: Getter/Setter for the reconnect_when_lost flag.  If set
               to true the db handle will be pinged on each prepare or do statement 
               and the connection will be reestablished in case it's lost.
               Useful for long running jobs (over 8hrs), which means that the db 
               connection may be lost.
  Returntype : boolean
  Exceptions : none
  Caller     : <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_pipeline.html">Pipeline</a>
  Status     : Stable</pre><pre> </pre><div id="codesection-reconnect_when_lost" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-reconnect_when_lost-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-reconnect_when_lost-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-reconnect_when_lost-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a7537c0fac89789eba198006c7b1dfbf8">reconnect_when_lost</a> {</div>
<div class="line">  my ( $self, $value ) = @_;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ( defined($value) ) {</div>
<div class="line">    $self-&gt;{<span class="stringliteral">&#39;reconnect_when_lost&#39;</span>} = $value;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{<span class="stringliteral">&#39;reconnect_when_lost&#39;</span>};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a813db671a4662cbc118b36ac9955e2ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::user </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : (optional) string $arg
               The new value of the username used by this connection. 
  Example    :</pre><div class="fragment"><div class="line">$user = $db_connection-&gt;user()</div>
</div><!-- fragment --> <pre>  Description: Convenience alias for the username method
  Returntype : String</pre><pre> </pre><div id="codesection-user" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-user-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-user-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-user-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a813db671a4662cbc118b36ac9955e2ab">user</a> {</div>
<div class="line">  my ($self, $arg) = @_;</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;username($arg);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a656ac0a564c773ba2127d48da4821510"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public String Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::username </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : (optional) string $arg
               The new value of the username used by this connection. 
  Example    :</pre><div class="fragment"><div class="line">$username = $db_connection-&gt;username()</div>
</div><!-- fragment --> <pre>  Description: Getter/Setter for the username used by this 
               connection.  There is currently no point in setting this value
               after the connection has already been established by the 
               constructor.
  Returntype : string
  Exceptions : none
  Caller     : new
  Status     : Stable</pre><pre> </pre><div id="codesection-username" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-username-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-username-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-username-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a656ac0a564c773ba2127d48da4821510">username</a> {</div>
<div class="line">  my ($self, $arg ) = @_;</div>
<div class="line">  ( defined $arg ) &amp;&amp;</div>
<div class="line">    ( $self-&gt;{_username} = $arg );</div>
<div class="line">  $self-&gt;{_username};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a9d2360ccf06ccac4f3a392c59e4af615"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::wait_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-wait_timeout" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-wait_timeout-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-wait_timeout-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-wait_timeout-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#a9d2360ccf06ccac4f3a392c59e4af615">wait_timeout</a>{</div>
<div class="line">  my($self, $arg ) = @_;</div>
<div class="line"></div>
<div class="line">  (defined $arg) &amp;&amp;</div>
<div class="line">    ($self-&gt;{_wait_timeout} = $arg );</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{_wait_timeout};</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ac1e7d1b09012f716c7860e6eb7c71e13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Any Bio::EnsEMBL::Hive::DBSQL::CoreDBConnection::work_with_db_handle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
  Arg [1]    : CodeRef $callback
  Example    :</pre><div class="fragment"><div class="line">my $q_t = $dbc-&gt;work_with_db_handle(sub { my ($dbh) = @_; <span class="keywordflow">return</span> $dbh-&gt;quote_identifier(<span class="stringliteral">&#39;table&#39;</span>); });</div>
</div><!-- fragment --> <pre>  Description: Gives access to the DBI handle to execute methods not normally
               provided by the <a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_d_b_connection.html">DBConnection</a> interface
  Returntype : Any from callback
  Exceptions : If the callback paramater is not a CodeRef; all other 
               errors are re-thrown after cleanup.
  Caller     : Adaptor modules
  Status     : Stable</pre><pre> </pre><div id="codesection-work_with_db_handle" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-work_with_db_handle-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-work_with_db_handle-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-work_with_db_handle-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html#ac1e7d1b09012f716c7860e6eb7c71e13">work_with_db_handle</a> {</div>
<div class="line">  my ($self, $callback) = @_;</div>
<div class="line">  my $wantarray = wantarray;</div>
<div class="line">  <span class="keywordflow">if</span>( $self-&gt;reconnect_when_lost() &amp;&amp; !$self-&gt;db_handle()-&gt;ping()) { </div>
<div class="line">    $self-&gt;reconnect();</div>
<div class="line">  }</div>
<div class="line">  my @results;</div>
<div class="line">  eval {</div>
<div class="line">    <span class="keywordflow">if</span>($wantarray) { </div>
<div class="line">      @results = $callback-&gt;($self-&gt;db_handle())</div>
<div class="line">    }</div>
<div class="line">    elsif(defined $wantarray) {</div>
<div class="line">      $results[0] = $callback-&gt;($self-&gt;db_handle());</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      $callback-&gt;($self-&gt;db_handle());</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line">  my $original_error = $@;</div>
<div class="line">  </div>
<div class="line">  $self-&gt;query_count($self-&gt;query_count()+1);</div>
<div class="line">  eval {</div>
<div class="line">    <span class="keywordflow">if</span>($self-&gt;disconnect_when_inactive()) {</div>
<div class="line">      $self-&gt;disconnect_if_idle();</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line">  <span class="keywordflow">if</span>($@) {</div>
<div class="line">    warn <span class="stringliteral">&quot;Detected an error whilst attempting to disconnect the DBI handle: $@&quot;</span>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span>($original_error) {</div>
<div class="line">    <span class="keywordflow">throw</span> <span class="stringliteral">&quot;Detected an error when running DBI wrapper callback:\n$original_error&quot;</span>;</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">if</span>(defined $wantarray) {</div>
<div class="line">    <span class="keywordflow">return</span> ($wantarray) ? @results : $results[0];</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>modules/Bio/EnsEMBL/Hive/DBSQL/<a class="el" href="_core_d_b_connection_8pm.html">CoreDBConnection.pm</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_bio.html">Bio</a></li><li class="navelem"><a class="el" href="namespace_bio_1_1_ens_e_m_b_l.html">EnsEMBL</a></li><li class="navelem"><a class="el" href="namespace_bio_1_1_ens_e_m_b_l_1_1_hive.html">Hive</a></li><li class="navelem"><a class="el" href="namespace_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l.html">DBSQL</a></li><li class="navelem"><a class="el" href="class_bio_1_1_ens_e_m_b_l_1_1_hive_1_1_d_b_s_q_l_1_1_core_d_b_connection.html">CoreDBConnection</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
