<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>lsf_report.pl</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">



<h1 id="NAME">NAME</h1>

<pre><code>    lsf_report.pl</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<pre><code>    This script is used for offline examination of resources used by a Hive pipeline running on LSF
    (the script is [Pp]latform-dependent).

    Based on the command-line parameters &#39;start_date&#39; and &#39;end_date&#39;, or on the start time of the first
    worker and end time of the last worker (as recorded in pipeline DB), it pulls the relevant data out
    of LSF&#39;s &#39;bacct&#39; database, parses it and stores in &#39;lsf_report&#39; table.
    You can join this table to &#39;worker&#39; table USING(meadow_name,process_id) in the usual MySQL way
    to filter by analysis_id, do various stats, etc.

    You can optionally ask the script to dump the &#39;bacct&#39; database in a dump file,
    or fill in the &#39;lsf_report&#39; table from an existing dump file (most time is taken by querying bacct).

    Please note the script may additionally pull information about LSF processes that you ran simultaneously
    with running the pipeline. It is easy to ignore them by joining into &#39;worker&#39; table.</code></pre>

<h1 id="USAGE-EXAMPLES">USAGE EXAMPLES</h1>

<pre><code>        # Just run it the usual way: query &#39;bacct&#39; and load the relevant data into &#39;lsf_report&#39; table:
    lsf_report.pl -url mysql://username:secret@hostname:port/long_mult_test

        # The same, but assuming LSF user someone_else ran the pipeline:
    lsf_report.pl -url mysql://username:secret@hostname:port/long_mult_test -lsf_user someone_else

        # Assuming the dump file existed. Load the dumped bacct data into &#39;lsf_report&#39; table:
    lsf_report.pl -url mysql://username:secret@hostname:port/long_mult_test -dump long_mult.bacct

        # Assuming the dump file did not exist. Query &#39;bacct&#39;, dump the data into a file and load it into &#39;lsf_report&#39;:
    lsf_report.pl -url mysql://username:secret@hostname:port/long_mult_test -dump long_mult_again.bacct</code></pre>

<h1 id="OPTIONS">OPTIONS</h1>

<pre><code>    -help                   : print this help
    -url &lt;url string&gt;       : url defining where hive database is located
    -dump &lt;filename&gt;        : a filename for bacct dump. It will be read from if the file exists, and written to otherwise.
    -lsf_user &lt;username&gt;    : if it wasn&#39;t you who ran the pipeline, LSF user name of that user can be provided
    -start_date &lt;date&gt;      : minimal start date of a job (the format is &#39;2012/01/25/13:46&#39;)
    -end_date &lt;date&gt;        : maximal end date of a job (the format is &#39;2012/01/25/13:46&#39;)</code></pre>

<h1 id="LICENSE">LICENSE</h1>

<pre><code>    Copyright [1999-2015] Wellcome Trust Sanger Institute and the EMBL-European Bioinformatics Institute
<pre><code>    Copyright [2016-2017] EMBL-European Bioinformatics Institute

    Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software distributed under the License
    is distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and limitations under the License.</code></pre>

<h1 id="CONTACT">CONTACT</h1>

<pre><code>    Please subscribe to the Hive mailing list:  http://listserver.ebi.ac.uk/mailman/listinfo/ehive-users  to discuss Hive-related questions or to be notified of our updates</code></pre>


</body>

</html>


